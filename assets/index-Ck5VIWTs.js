import{aj as d,r as i,au as l,i as m}from"./iframe-BToZTpox.js";const f=({ref:t,enabled:u=!0,handler:n})=>{const s=d(n),r=i.useRef({ignoreEmulatedMouseEvents:!1,isPointerDown:!1}),o=i.useCallback(e=>{E(e,t)&&(r.current.isPointerDown=!0)},[t]),c=i.useCallback(e=>{if(r.current.ignoreEmulatedMouseEvents){r.current.ignoreEmulatedMouseEvents=!1;return}r.current.isPointerDown&&n&&E(e,t)&&(r.current.isPointerDown=!1,s(e))},[n,s,t]),a=i.useCallback(e=>{r.current.ignoreEmulatedMouseEvents=!0,r.current.isPointerDown&&n&&E(e,t)&&(r.current.isPointerDown=!1,s(e))},[n,s,t]);i.useEffect(()=>{if(!u)return;const e=l(m(t)?t[0]?.current:t.current);return e.addEventListener("mousedown",o,!0),e.addEventListener("mouseup",c,!0),e.addEventListener("touchstart",o,!0),e.addEventListener("touchend",a,!0),()=>{e.removeEventListener("mousedown",o,!0),e.removeEventListener("mouseup",c,!0),e.removeEventListener("touchstart",o,!0),e.removeEventListener("touchend",a,!0)}},[n,t,s,r,u,o,c,a])},E=(t,u)=>{const n=t.target;return"button"in t&&t.button>0||n&&!l(n).contains(n)?!1:m(u)?!u.some(s=>s.current?.contains(n)):!u.current?.contains(n)};export{f as u};
