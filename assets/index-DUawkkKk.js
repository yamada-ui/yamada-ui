import{r as m,ay as F,az as p,G as d,aA as q,aB as T,aq as b}from"./iframe-6Bjnmk15.js";import{u as A}from"./index-CX0CAc80.js";const w=(t,{focusTarget:n,preventScroll:a,shouldFocus:c,visible:r}={preventScroll:!0,shouldFocus:!1})=>{const u=c&&r,e=m.useRef(!1),s=m.useCallback(()=>F(t)?t.current:t,[t]),o=m.useCallback(()=>F(n)?n.current:n,[n]),g=m.useCallback(()=>{const i=s();if(!i||!u||e.current||i.contains(document.activeElement))return;const f=o();if(f)requestAnimationFrame(()=>{f.focus({preventScroll:a}),e.current=!0});else{const l=p(i);requestAnimationFrame(l?()=>{l.focus({preventScroll:a}),e.current=!0}:()=>{i.focus({preventScroll:a}),e.current=!0})}},[s,u,o,a]);d(()=>{e.current=!u},[u]),d(()=>{requestAnimationFrame(g)},[g]),A(s,"transitionend",g)},C=({ref:t,elements:n,enabled:a})=>{A(()=>b(t.current),"pointerdown",c=>{if(!q()||!a)return;const r=c.target,e=(n??[t]).some(s=>{const o=F(s)?s.current:s;return o?.contains(r)||o===r});T(b(t.current))!==r&&e&&(c.preventDefault(),r.focus())})};export{C as a,w as u};
