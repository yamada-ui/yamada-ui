import{c as P,r as T,aa as b,m as S,J as D,k as C,aj as y}from"./iframe-D_HYglKf.js";const O=r=>r.sort((c,l)=>{const s=c.compareDocumentPosition(l);return s&Node.DOCUMENT_POSITION_FOLLOWING||s&Node.DOCUMENT_POSITION_CONTAINED_BY?-1:s&Node.DOCUMENT_POSITION_PRECEDING||s&Node.DOCUMENT_POSITION_CONTAINS?1:((s&Node.DOCUMENT_POSITION_DISCONNECTED||s&Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC)&&console.warn("Cannot sort the given nodes."),0)}),M=(r,c,l)=>{let s=r+1;return l&&s>=c&&(s=0),s},h=(r,c,l)=>{let s=r-1;return l&&s<0&&(s=c),s},p=()=>{const r=new Map,c=e=>{r.forEach(n=>{const t=e.indexOf(n.node);n.index=t,n.node.dataset.index=n.index.toString()})},l=(e,n)=>{if(!e||r.has(e))return;const t=Array.from(r.keys()).concat(e),u=O(t),d={...n,index:-1,node:e};r.set(e,d),c(u)},s=()=>r.clear(),E=e=>n=>l(n,e),a=e=>{if(e==null)return;r.delete(e);const n=O(Array.from(r.keys()));c(n)},o=()=>x().length,i=()=>v().length,m=(e,n)=>{if(!e||(e instanceof Node||(e=e.node),y(e.dataset.activedescendant)))return;x().forEach(({node:u})=>{delete u.dataset.activedescendant}),e.dataset.activedescendant="",n&&e.focus(n)},N=e=>{var n,t;return e?e instanceof Node?((n=r.get(e))==null?void 0:n.index)??-1:((t=r.get(e.node))==null?void 0:t.index)??-1:-1},_=e=>e?e instanceof Node?v().findIndex(({node:n})=>n.isSameNode(e)):v().findIndex(({node:n})=>n.isSameNode(e.node)):-1,x=()=>Array.from(r.values()).sort((e,n)=>e.index-n.index),v=()=>x().filter(({disabled:e,node:n})=>!C(e,n)),I=e=>{if(!(!o()||e==null))return D(e)?x()[e]:r.get(e)},V=e=>{if(i())return v()[e]};return{active:m,count:o,destroy:s,enabledCount:i,enabledFirstValue:()=>V(0),enabledIndexOf:_,enabledLastValue:()=>V(i()-1),enabledNextValue:(e,n=!0)=>{if(!i())return;let t=D(e)?e:N(e),u=null,d=!1;for(;u==null;){if(t++,t>=o()){if(!n)return;t=0,d=!0}const f=I(t);u=f&&!C(f.disabled,f.node)?f:null}return d&&(u.recurred=d),u},enabledPrevValue:(e,n=!0)=>{if(!i())return;let t=D(e)?e:N(e),u=null,d=!1;for(;u==null;){if(t--,t<0){if(!n)return;t=o()-1,d=!0}const f=I(t);u=f&&!C(f.disabled,f.node)?f:null}return d&&(u.recurred=d),u},enabledValue:V,enabledValues:v,firstValue:()=>I(0),indexOf:N,lastValue:()=>I(o()-1),nextValue:(e,n=!0)=>{if(!o())return;const t=D(e)?e:N(e);if(t===-1)return;const u=M(t,o(),n);return I(u)},prevValue:(e,n=!0)=>{if(!o())return;const t=D(e)?e:N(e);if(t===-1)return;const u=h(t,o()-1,n);return I(u)},register:E,unregister:a,value:I,values:x}},j=()=>{const[r,c]=P({name:"DescendantsContext"}),l=a=>{const o=T.useRef(null);return b(()=>()=>{o.current&&(a==null||a.unregister(o.current))},[]),i=>S(o,a==null?void 0:a.register(i))};return{DescendantsContext:r,useDescendant:a=>{const o=c(),i=l(o);return{descendants:o,register:i(a)}},useDescendantRegister:l,useDescendants:()=>{const a=T.useRef(p());return b(()=>()=>a.current.destroy()),a.current},useDescendantsContext:c}};export{j as c};
