import{r as i,au as G,ag as J,a2 as D}from"./iframe-DaVT7dxo.js";const B=(x,p)=>{const m=getComputedStyle(x);return["auto","overlay","scroll"].includes(m.overflow)?!0:p?["auto","overlay","scroll"].includes(m.overflowY):["auto","overlay","scroll"].includes(m.overflowX)},L=({behavior:x,disabled:p=!1,indexRef:m,initialLoad:k=!1,orientation:P="vertical",resetRef:X,reverse:f=!1,rootMargin:H,rootRef:s,startIndex:Y=k?0:1,threshold:O,onLoad:j}={})=>{const T=i.useRef(null),{getDocument:v,getWindow:d}=G(),y=i.useRef(Y),g=i.useRef(!1),C=i.useRef(void 0),[q,E]=i.useState(!1),S=J(j),r=P==="vertical",h=r?"top":"left",I=i.useMemo(()=>({root:s==null?void 0:s.current,rootMargin:H,threshold:O}),[H,s,O]),z=i.useCallback((u=1,t=!0)=>{var e;if(y.current=u,E(!1),t){const c=s==null?void 0:s.current,n=(e=v())==null?void 0:e.body,l=c&&B(c,r)?c:n;if(l){const o=l===n?d():l,b=f?r?l.scrollHeight:l.scrollWidth:0;o==null||o.scrollTo({behavior:x,[h]:b})}}p||setTimeout(()=>{const c=C.current,n=T.current;n&&(c==null||c.observe(n))})},[p,s,v,r,d,f,x,h]),W=i.useCallback(()=>{const u=C.current,t=T.current;t&&(u==null||u.unobserve(t)),E(!0)},[]),F=i.useCallback(()=>new IntersectionObserver(async([t])=>{var b;const e=s==null?void 0:s.current,c=(b=v())==null?void 0:b.body,n=e&&B(e,r)?e:c;if(!(t!=null&&t.isIntersecting)||g.current||!n)return;const l={entry:t,finish:W,index:y.current};g.current=!0,e&&(e.ariaBusy="true");let o=0;f&&(o=r?n.scrollHeight:n.scrollWidth),await S(l),f&&setTimeout(()=>{const a=n===c?d():n,w=(r?n.scrollHeight:n.scrollWidth)-o;a==null||a.scrollTo({[h]:w})}),y.current+=1,g.current=!1,e&&(e.ariaBusy="false")},I),[I,s,v,r,W,f,S,d,h]);return i.useEffect(()=>{(async()=>{var l;const t=T.current,e=y.current,c=s==null?void 0:s.current;if(k&&(g.current=!0,c&&(c.ariaBusy="true"),await S({finish:W,index:e}),y.current+=1,g.current=!1,c&&(c.ariaBusy="false")),p)return;C.current=F();const n=C.current;if(f){const o=s==null?void 0:s.current,b=(l=v())==null?void 0:l.body,a=o&&B(o,r)?o:b;if(a){const w=a===b?d():a,A=r?a.scrollHeight:a.scrollWidth;w==null||w.scrollTo({[h]:A})}}return setTimeout(()=>{t&&n.observe(t)}),()=>{t&&n.unobserve(t)}})()},[F,k,p,f,r,W,S,s,v,d,h]),D(X,z),D(m,u=>y.current=u),{ref:T,finish:q}};export{L as u};
