import{c as P,r as E,ab as T,m as S,N as D,k as C,ac as y}from"./iframe-XeUDGc9-.js";const O=s=>s.sort((a,o)=>{const r=a.compareDocumentPosition(o);return r&Node.DOCUMENT_POSITION_FOLLOWING||r&Node.DOCUMENT_POSITION_CONTAINED_BY?-1:r&Node.DOCUMENT_POSITION_PRECEDING||r&Node.DOCUMENT_POSITION_CONTAINS?1:((r&Node.DOCUMENT_POSITION_DISCONNECTED||r&Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC)&&console.warn("Cannot sort the given nodes."),0)}),M=(s,a,o)=>{let r=s+1;return o&&r>=a&&(r=0),r},h=(s,a,o)=>{let r=s-1;return o&&r<0&&(r=a),r},p=()=>{const s=new Map,a=e=>{s.forEach(n=>{const t=e.indexOf(n.node);n.index=t,n.node.dataset.index=n.index.toString()})},o=(e,n)=>{if(!e||s.has(e))return;const t=Array.from(s.keys()).concat(e),u=O(t),i={...n,index:-1,node:e};s.set(e,i),a(u)},r=()=>s.clear(),b=e=>n=>o(n,e),d=e=>{if(e==null)return;s.delete(e);const n=O(Array.from(s.keys()));a(n)},c=()=>x().length,l=()=>v().length,m=(e,n)=>{if(!e||(e instanceof Node||(e=e.node),y(e.dataset.activedescendant)))return;x().forEach(({node:u})=>{delete u.dataset.activedescendant}),e.dataset.activedescendant="",n&&e.focus(n)},N=e=>e?e instanceof Node?s.get(e)?.index??-1:s.get(e.node)?.index??-1:-1,_=e=>e?e instanceof Node?v().findIndex(({node:n})=>n.isSameNode(e)):v().findIndex(({node:n})=>n.isSameNode(e.node)):-1,x=()=>Array.from(s.values()).sort((e,n)=>e.index-n.index),v=()=>x().filter(({disabled:e,node:n})=>!C(e,n)),I=e=>{if(!(!c()||e==null))return D(e)?x()[e]:s.get(e)},V=e=>{if(l())return v()[e]};return{active:m,count:c,destroy:r,enabledCount:l,enabledFirstValue:()=>V(0),enabledIndexOf:_,enabledLastValue:()=>V(l()-1),enabledNextValue:(e,n=!0)=>{if(!l())return;let t=D(e)?e:N(e),u=null,i=!1;for(;u==null;){if(t++,t>=c()){if(!n)return;t=0,i=!0}const f=I(t);u=f&&!C(f.disabled,f.node)?f:null}return i&&(u.recurred=i),u},enabledPrevValue:(e,n=!0)=>{if(!l())return;let t=D(e)?e:N(e),u=null,i=!1;for(;u==null;){if(t--,t<0){if(!n)return;t=c()-1,i=!0}const f=I(t);u=f&&!C(f.disabled,f.node)?f:null}return i&&(u.recurred=i),u},enabledValue:V,enabledValues:v,firstValue:()=>I(0),indexOf:N,lastValue:()=>I(c()-1),nextValue:(e,n=!0)=>{if(!c())return;const t=D(e)?e:N(e);if(t===-1)return;const u=M(t,c(),n);return I(u)},prevValue:(e,n=!0)=>{if(!c())return;const t=D(e)?e:N(e);if(t===-1)return;const u=h(t,c()-1,n);return I(u)},register:b,unregister:d,value:I,values:x}},B=()=>{const[s,a]=P({name:"DescendantsContext"}),o=d=>{const c=E.useRef(null);return T(()=>()=>{c.current&&d?.unregister(c.current)},[]),l=>S(c,d?.register(l))};return{DescendantsContext:s,useDescendant:d=>{const c=a(),l=o(c);return{descendants:c,register:l(d)}},useDescendantRegister:o,useDescendants:()=>{const d=E.useRef(p());return T(()=>()=>d.current.destroy()),d.current},useDescendantsContext:a}};export{B as c};
