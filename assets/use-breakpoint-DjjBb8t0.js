import{r as s,at as R,ap as y,D as C,S,y as x}from"./iframe-BHpF9Anv.js";const A=()=>{const p=s.useRef(0),{breakpoints:d,config:q}=R(),{getWindow:c}=y(),{containerRef:i,direction:h="down",identifier:b="@media screen"}=q.breakpoint??{},u=!!i,a=s.useMemo(()=>d.queries.map(({breakpoint:t,maxW:n,minMaxQuery:e,minW:r})=>{const o=b==="@media screen"?"@media screen and ":`${b} `,f=e?.replace(o,"")??"";return{breakpoint:t,maxW:n,minW:r,query:f}}),[d,b]),m=!!a.length,l=s.useCallback(t=>{if(C(t)){const n=c();if(u||!m)return"base";for(const{breakpoint:e,query:r}of a)if(n?.matchMedia(r)?.matches)return e}else for(const{breakpoint:n,maxW:e,minW:r}of a)if(h!=="up"){if((r??0)<=t)return n}else if(t<=(e??1/0))return n;return"base"},[h,c,u,m,a]),k=s.useRef(l()),v=s.useCallback(t=>{if(!u||!m){const n=a.map(({breakpoint:e,query:r})=>{const o=c()?.matchMedia(r),f=E=>{E.matches&&(k.current=e),t()};return o?.addEventListener("change",f),()=>{o?.removeEventListener("change",f)}});return()=>{n.forEach(e=>e())}}else if(S()){const n=new ResizeObserver(([e])=>{if(!e)return;cancelAnimationFrame(p.current);const{width:r}=e.contentRect;k.current=l(r),p.current=requestAnimationFrame(t)});return i.current&&n.observe(i.current),()=>{n.disconnect(),cancelAnimationFrame(p.current)}}else return x},[i,l,c,u,m,a]),g=s.useCallback(()=>k.current,[]);return s.useSyncExternalStore(v,g,g)};export{A as u};
