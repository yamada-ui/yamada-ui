import{d as le,c as ce,ag as ue,r as o,M as G,aa as de,N as be,h as c,m as y,g as fe,k as ge,j as J,s as Ce}from"./iframe-LqombrNM.js";import{u as me}from"./index-CQhAjkmY.js";import{a as pe}from"./index-M5PhJsdN.js";import{u as he}from"./use-field-props-DcPw9IyF.js";import{u as ve}from"./use-input-border-50s9ZO4y.js";const Ee=le({base:{control:{alignItems:"start",display:"inline-flex",gap:"sm"},input:{bg:"transparent",focusRingColor:"{focus-border-color}",focusVisibleRing:"inside",fontSize:"inherit",fontWeight:"inherit",minH:"1lh",p:"1",rounded:"l2",textAlign:"inherit",transitionDuration:"moderate",transitionProperty:"common",w:"full",_invalid:{borderColor:"{error-border-color}",focusRingColor:"{error-border-color}"},_disabled:{layerStyle:"disabled"}},preview:{bg:"transparent",cursor:"text",display:"inline-block",fontSize:"inherit",fontWeight:"inherit",minH:"1lh",p:"1",rounded:"l2",textAlign:"inherit",transitionDuration:"moderate",transitionProperty:"common",whiteSpace:"pre-line",_hover:{bg:"bg.subtle"},_readOnly:{pointerEvents:"none"},_disabled:{layerStyle:"disabled"}},root:{"--error-border-color":"colors.border.error","--focus-border-color":"colorScheme.outline",alignItems:"start",display:"inline-flex",gap:"sm",position:"relative",w:"full"},textarea:{bg:"transparent",boxSizing:"content-box",focusRingColor:"{focus-border-color}",focusVisibleRing:"inside",fontSize:"inherit",fontWeight:"inherit",minH:"1lh",p:"1",rounded:"l2",textAlign:"inherit",transitionDuration:"moderate",transitionProperty:"common",w:"full",_invalid:{borderColor:"{error-border-color}",focusRingColor:"{error-border-color}"},_disabled:{layerStyle:"disabled"}}}}),[Pe,m]=ce({name:"EditableContext"}),ye=(s={})=>{const{props:{id:r,defaultValue:I,disabled:a,placeholder:u,previewFocusable:V=!0,readOnly:h,required:v,selectAllOnFocus:k=!0,startWithEditView:K,submitOnBlur:S=!0,value:_,onCancel:E,onChange:Q,onEdit:X,onSubmit:w,...z},ariaProps:R,dataProps:i,eventProps:b}=he(s),H=ue(X),[n,A]=o.useState(!!K&&!a),[l,D]=me({defaultValue:I||"",value:_,onChange:Q}),F=!n&&!a,U=l.length===0,[O,q]=o.useState(l),f=o.useRef(null),Y=o.useRef(null),L=o.useRef(null),W=o.useRef(null),j=o.useRef(null),B=o.useCallback(e=>D(e.currentTarget.value),[D]),P=o.useCallback(()=>q(l),[l]),x=o.useCallback(()=>{F&&A(!0)},[F]),d=o.useCallback(()=>{A(!1),D(O),E==null||E(O)},[O,E,D]),g=o.useCallback(()=>{A(!1),q(l),w==null||w(l)},[w,l]),M=o.useCallback(e=>{if(!(e.key!=="Escape"&&e.key!=="Enter"))if(e.preventDefault(),e.key==="Escape")d();else{const{metaKey:t,shiftKey:C}=e;!C&&!t&&g()}},[d,g]),N=o.useCallback(e=>{e.key==="Escape"&&(e.preventDefault(),d())},[d]),T=o.useCallback(e=>{if(!n)return;const t=e.currentTarget.ownerDocument,C=e.relatedTarget??t.activeElement,ie=G(W.current,C),ae=G(j.current,C);!ie&&!ae&&(S?g():d())},[n,S,g,d]);pe({ref:f,elements:[W,j],enabled:n}),de(()=>{var e,t;n&&((e=f.current)==null||e.focus(),k&&((t=f.current)==null||t.select()))},[]),be(()=>{var e,t,C;if(!n){(e=L.current)==null||e.focus();return}(t=f.current)==null||t.focus(),k&&((C=f.current)==null||C.select()),H()},[n,H,k]),o.useEffect(()=>{if(n)return;const e=f.current;(e==null?void 0:e.ownerDocument.activeElement)===e&&(e==null||e.blur())},[n]);const Z=o.useCallback(e=>({...z,...i,...e}),[z,i]),$=o.useCallback(({ref:e,...t}={})=>({...i,...t,ref:y(Y,e),children:U?u:l,hidden:n,tabIndex:F&&V?0:void 0,onFocus:c(t.onFocus,x,P)}),[i,n,F,V,U,x,P,u,l]),ee=o.useCallback(({ref:e,...t}={})=>({...i,...R,...t,id:r,ref:y(f,e),disabled:a,hidden:!n,placeholder:u,readOnly:h,required:v,value:l,onBlur:c(b.onBlur,t.onBlur,T),onChange:c(t.onChange,B),onFocus:c(b.onFocus,t.onFocus,P),onKeyDown:c(t.onKeyDown,M)}),[i,R,r,a,n,u,h,v,l,b.onBlur,b.onFocus,T,B,P,M]),te=o.useCallback(({ref:e,...t}={})=>({...i,...R,...t,id:r,ref:y(f,e),disabled:a,hidden:!n,placeholder:u,readOnly:h,required:v,value:l,onBlur:c(b.onBlur,t.onBlur,T),onChange:c(t.onChange,B),onFocus:c(b.onFocus,t.onFocus,P),onKeyDown:c(t.onKeyDown,N)}),[i,R,r,a,n,u,h,v,l,b.onBlur,b.onFocus,T,B,P,N]),oe=o.useCallback(e=>({...i,role:"group",...e}),[i]),ne=o.useCallback(({ref:e,...t}={})=>({...i,...t,ref:y(L,e),disabled:a,hidden:n,onClick:c(t.onClick,x)}),[i,a,n,x]),re=o.useCallback(({ref:e,...t}={})=>({...i,...t,ref:y(j,e),disabled:a,hidden:!n,onClick:c(t.onClick,g)}),[i,a,n,g]),se=o.useCallback(({ref:e,...t}={})=>({...i,...t,ref:y(W,e),disabled:a,hidden:!n,onClick:c(t.onClick,d)}),[i,a,n,d]);return{editing:n,value:l,getCancelProps:se,getControlProps:oe,getEditProps:ne,getInputProps:ee,getPreviewProps:$,getRootProps:Z,getSubmitProps:re,getTextareaProps:te,onCancel:d,onEdit:x,onSubmit:g}},{withContext:p,withProvider:ke}=fe("editable",Ee),Be=ke(({children:s,errorBorderColor:r,focusBorderColor:I,...a})=>{const{editing:u,value:V,getRootProps:h,onCancel:v,onEdit:k,onSubmit:K,...S}=ye(a),_=ve({errorBorderColor:r,focusBorderColor:I}),E=ge(s,{editing:u,onCancel:v,onEdit:k,onSubmit:K});return J.jsx(Pe,{value:{editing:u,...S},children:J.jsx(Ce.div,{...h(),..._,children:E})})})(),Te=p("span","preview")(void 0,s=>{const{getPreviewProps:r}=m();return{...r(s)}}),Ie=p("input","input")(void 0,s=>{const{getInputProps:r}=m();return{...r(s)}}),Ve=p("textarea","textarea")(void 0,s=>{const{getTextareaProps:r}=m();return{...r(s)}}),Ke=p("div","control")(void 0,s=>{const{getControlProps:r}=m();return{...r(s)}}),_e=p("button",{name:"EditTrigger",slot:["trigger","edit"]})(void 0,s=>{const{getEditProps:r}=m();return{asChild:!0,...r(s)}}),Ae=p("button",{name:"CancelTrigger",slot:["trigger","cancel"]})(void 0,s=>{const{getCancelProps:r}=m();return{asChild:!0,...r(s)}}),Oe=p("button",{name:"SubmitTrigger",slot:["trigger","submit"]})(void 0,s=>{const{getSubmitProps:r}=m();return{asChild:!0,...r(s)}});export{Be as E,Te as a,Ie as b,Ve as c,Ke as d,_e as e,Oe as f,Ae as g,m as u};
