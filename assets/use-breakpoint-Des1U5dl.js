import{r as o,ax as F,au as S,H as A,a5 as W,E as B}from"./iframe-BIJNUwA0.js";const q=()=>{const p=o.useRef(0),{breakpoints:h,config:E}=F(),{getWindow:c}=S(),{containerRef:i,direction:l="down",identifier:m="@media screen"}=E.breakpoint??{},u=!!i,a=o.useMemo(()=>h.queries.map(({breakpoint:s,maxW:n,minMaxQuery:e,minW:t})=>{const r=m==="@media screen"?"@media screen and ":`${m} `,b=(e==null?void 0:e.replace(r,""))??"";return{breakpoint:s,maxW:n,minW:t,query:b}}),[h,m]),f=!!a.length,k=o.useCallback(s=>{if(A(s)){const n=c();if(u||!f)return"base";for(const{breakpoint:e,query:t}of a){const r=n==null?void 0:n.matchMedia(t);if(r!=null&&r.matches)return e}}else for(const{breakpoint:n,maxW:e,minW:t}of a)if(l!=="up"){if((t??0)<=s)return n}else if(s<=(e??1/0))return n;return"base"},[l,c,u,f,a]),d=o.useRef(k()),R=o.useCallback(s=>{if(!u||!f){const n=a.map(({breakpoint:e,query:t})=>{var v;const r=(v=c())==null?void 0:v.matchMedia(t),b=C=>{C.matches&&(d.current=e),s()};return r==null||r.addEventListener("change",b),()=>{r==null||r.removeEventListener("change",b)}});return()=>{n.forEach(e=>e())}}else if(W()){const n=new ResizeObserver(([e])=>{if(!e)return;cancelAnimationFrame(p.current);const{width:t}=e.contentRect;d.current=k(t),p.current=requestAnimationFrame(s)});return i.current&&n.observe(i.current),()=>{n.disconnect(),cancelAnimationFrame(p.current)}}else return B},[i,k,c,u,f,a]),g=o.useCallback(()=>d.current,[]);return o.useSyncExternalStore(R,g,g)};export{q as u};
