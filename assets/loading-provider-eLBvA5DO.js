import{j as d,a as Y,F as ce}from"./jsx-runtime-TtYKBvr-.js";import{u as D}from"./index-JFdRY6YH.js";import{r}from"./index-IybTgENJ.js";import{c as le,_ as ie,u as se,a as F,f as ue,z as de,s as fe,b as me,R as ve,e as he}from"./component-G3mliOEp.js";import{L as j}from"./loading-JdMW4dxy.js";import{M as V}from"./motion-ONtTX0Ck.js";import{m as ge}from"./motion-AgWUVtfu.js";import{u as H,Y as N,y as Ce,F as Se,R as Re}from"./factory-yYnGGCem.js";import{A as be}from"./index-GPdqE8CR.js";import{P as ye}from"./container-portal-C0JWommc.js";var q=le(),z=function(){},X=r.forwardRef(function(e,t){var n=r.useRef(null),a=r.useState({onScrollCapture:z,onWheelCapture:z,onTouchMoveCapture:z}),s=a[0],l=a[1],c=e.forwardProps,f=e.children,v=e.className,S=e.removeScrollBar,h=e.enabled,R=e.shards,w=e.sideCar,p=e.noIsolation,m=e.inert,o=e.allowPinchZoom,i=e.as,g=i===void 0?"div":i,b=ie(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),C=w,y=se([n,t]),u=F(F({},b),s);return r.createElement(r.Fragment,null,h&&r.createElement(C,{sideCar:q,removeScrollBar:S,shards:R,noIsolation:p,inert:m,setCallbacks:l,allowPinchZoom:!!o,lockRef:n}),c?r.cloneElement(r.Children.only(f),F(F({},u),{ref:y})):r.createElement(g,F({},u,{className:v,ref:y}),f))});X.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};X.classNames={fullWidth:ue,zeroRight:de};var A=!1;if(typeof window<"u")try{var M=Object.defineProperty({},"passive",{get:function(){return A=!0,!0}});window.addEventListener("test",M,M),window.removeEventListener("test",M,M)}catch{A=!1}var E=A?{passive:!1}:!1,we=function(e){return e.tagName==="TEXTAREA"},G=function(e,t){var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!we(e)&&n[t]==="visible")},pe=function(e){return G(e,"overflowY")},Le=function(e){return G(e,"overflowX")},Q=function(e,t){var n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var a=J(e,n);if(a){var s=K(e,n),l=s[1],c=s[2];if(l>c)return!0}n=n.parentNode}while(n&&n!==document.body);return!1},xe=function(e){var t=e.scrollTop,n=e.scrollHeight,a=e.clientHeight;return[t,n,a]},Ee=function(e){var t=e.scrollLeft,n=e.scrollWidth,a=e.clientWidth;return[t,n,a]},J=function(e,t){return e==="v"?pe(t):Le(t)},K=function(e,t){return e==="v"?xe(t):Ee(t)},ke=function(e,t){return e==="h"&&t==="rtl"?-1:1},Fe=function(e,t,n,a,s){var l=ke(e,window.getComputedStyle(t).direction),c=l*a,f=n.target,v=t.contains(f),S=!1,h=c>0,R=0,w=0;do{var p=K(e,f),m=p[0],o=p[1],i=p[2],g=o-i-l*m;(m||g)&&J(e,f)&&(R+=g,w+=m),f=f.parentNode}while(!v&&f!==document.body||v&&(t.contains(f)||t===f));return(h&&(s&&R===0||!s&&c>R)||!h&&(s&&w===0||!s&&-c>w))&&(S=!0),S},P=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},U=function(e){return[e.deltaX,e.deltaY]},$=function(e){return e&&"current"in e?e.current:e},Ne=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Be=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Me=0,k=[];function Pe(e){var t=r.useRef([]),n=r.useRef([0,0]),a=r.useRef(),s=r.useState(Me++)[0],l=r.useState(function(){return fe()})[0],c=r.useRef(e);r.useEffect(function(){c.current=e},[e]),r.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var o=me([e.lockRef.current],(e.shards||[]).map($),!0).filter(Boolean);return o.forEach(function(i){return i.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),o.forEach(function(i){return i.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var f=r.useCallback(function(o,i){if("touches"in o&&o.touches.length===2)return!c.current.allowPinchZoom;var g=P(o),b=n.current,C="deltaX"in o?o.deltaX:b[0]-g[0],y="deltaY"in o?o.deltaY:b[1]-g[1],u,L=o.target,x=Math.abs(C)>Math.abs(y)?"h":"v";if("touches"in o&&x==="h"&&L.type==="range")return!1;var B=Q(x,L);if(!B)return!0;if(B?u=x:(u=x==="v"?"h":"v",B=Q(x,L)),!B)return!1;if(!a.current&&"changedTouches"in o&&(C||y)&&(a.current=u),!u)return!0;var Z=a.current||u;return Fe(Z,i,o,Z==="h"?C:y,!0)},[]),v=r.useCallback(function(o){var i=o;if(!(!k.length||k[k.length-1]!==l)){var g="deltaY"in i?U(i):P(i),b=t.current.filter(function(u){return u.name===i.type&&u.target===i.target&&Ne(u.delta,g)})[0];if(b&&b.should){i.cancelable&&i.preventDefault();return}if(!b){var C=(c.current.shards||[]).map($).filter(Boolean).filter(function(u){return u.contains(i.target)}),y=C.length>0?f(i,C[0]):!c.current.noIsolation;y&&i.cancelable&&i.preventDefault()}}},[]),S=r.useCallback(function(o,i,g,b){var C={name:o,delta:i,target:g,should:b};t.current.push(C),setTimeout(function(){t.current=t.current.filter(function(y){return y!==C})},1)},[]),h=r.useCallback(function(o){n.current=P(o),a.current=void 0},[]),R=r.useCallback(function(o){S(o.type,U(o),o.target,f(o,e.lockRef.current))},[]),w=r.useCallback(function(o){S(o.type,P(o),o.target,f(o,e.lockRef.current))},[]);r.useEffect(function(){return k.push(l),e.setCallbacks({onScrollCapture:R,onWheelCapture:R,onTouchMoveCapture:w}),document.addEventListener("wheel",v,E),document.addEventListener("touchmove",v,E),document.addEventListener("touchstart",h,E),function(){k=k.filter(function(o){return o!==l}),document.removeEventListener("wheel",v,E),document.removeEventListener("touchmove",v,E),document.removeEventListener("touchstart",h,E)}},[]);var p=e.removeScrollBar,m=e.inert;return r.createElement(r.Fragment,null,m?r.createElement(l,{styles:Be(s)}):null,p?r.createElement(ve,{gapMode:"margin"}):null)}const Ie=he(q,Pe);var ee=r.forwardRef(function(e,t){return r.createElement(X,F({},e,{ref:t,sideCar:Ie}))});ee.classNames=X.classNames;const Te=ee,te=r.createContext({}),I=()=>({isLoading:r.createRef(),start:r.createRef(),finish:r.createRef(),update:r.createRef(),force:r.createRef()}),T=e=>({isLoading:()=>{var t,n;return((n=(t=e.current.isLoading).current)==null?void 0:n.call(t))??!1},start:t=>{var n,a;return(a=(n=e.current.start).current)==null?void 0:a.call(n,t)},finish:()=>{var t,n;return(n=(t=e.current.finish).current)==null?void 0:n.call(t)},update:t=>{var n,a;return(a=(n=e.current.update).current)==null?void 0:a.call(n,t)},force:t=>{var n,a;return(a=(n=e.current.force).current)==null?void 0:a.call(n,t)}}),_e=e=>e+1,We=e=>e===0?e:e-1,$e=({screen:e,page:t,background:n,custom:a,children:s})=>{const l=r.useRef(I()),c=r.useRef(I()),f=r.useRef(I()),v=r.useRef(I()),S=T(l),h=T(c),R=T(f),w=T(v),p={screen:S,page:h,background:R,custom:w};return Y(te.Provider,{value:p,children:[s,d(_,{controlRefs:l,...e,component:(e==null?void 0:e.component)??(m=>d(re,{...m}))}),d(_,{controlRefs:c,...t,component:(t==null?void 0:t.component)??(m=>d(ae,{...m}))}),d(_,{controlRefs:f,...n,blockScrollOnMount:(n==null?void 0:n.blockScrollOnMount)??!1,component:(n==null?void 0:n.component)??(m=>d(oe,{...m}))}),d(_,{controlRefs:v,blockScrollOnMount:(n==null?void 0:n.blockScrollOnMount)??!1,...a,component:a==null?void 0:a.component})]})},_=({controlRefs:e,appendToParentPortal:t,containerRef:n,allowPinchZoom:a=!1,blockScrollOnMount:s=!0,initialState:l,duration:c=null,icon:f,text:v,component:S})=>{const h=r.useRef(!1),[{loadingCount:R,message:w,duration:p},m]=r.useState({loadingCount:l?1:0,message:void 0,duration:c}),{isLoading:o,start:i,finish:g,update:b,force:C}=r.useMemo(()=>({isLoading:()=>h.current,start:({message:u,duration:L=c}={})=>{h.current=!0,m(({loadingCount:x})=>({loadingCount:_e(x),message:u,duration:L}))},update:u=>m(L=>({...L,...u})),finish:()=>{h.current=!1,m(({loadingCount:u})=>({loadingCount:We(u),message:void 0,duration:c}))},force:({loadingCount:u=0,message:L,duration:x=c})=>{h.current=!!u,m({loadingCount:u,message:L,duration:x})}}),[c]);N(e.current.isLoading,o),N(e.current.start,i),N(e.current.finish,g),N(e.current.update,b),N(e.current.force,C);const y={initialState:l,icon:f,text:v,message:w,duration:p,onFinish:g};return Ce(()=>{(l||Se(c))&&m({loadingCount:l?1:0,message:void 0,duration:c})},[l,c]),d(be,{initial:!1,children:R?d(ye,{appendToParentPortal:t,containerRef:n,children:d(Te,{allowPinchZoom:a,enabled:s,forwardProps:!0,children:d(r.Fragment,{children:d(Ye,{component:S,...y})})})}):null})},Ye=({component:e,...t})=>typeof e=="function"?e(t):d(ce,{}),O=({message:e,...t})=>e?Re(e)?e:d(H.p,{...t,children:e}):null,Xe=(e="fade")=>({initial:{opacity:0,scale:e==="scaleFade"?.95:void 0},animate:{opacity:1,scale:e==="scaleFade"?1:void 0,transition:{duration:.4,ease:[.4,0,.2,1]}},exit:{opacity:0,scale:e==="scaleFade"?.95:void 0,transition:{duration:.4,ease:[.4,0,1,1]}}}),ne=(e="fill")=>({position:"fixed",top:0,right:0,bottom:0,left:0,zIndex:"beerus",bg:e==="fill"?["white","black"]:"blackAlpha.600",w:"100vw",h:"100dvh",p:"md",display:"flex",justifyContent:"center",alignItems:"center"}),W=(e,t="fade")=>({initial:e?!1:"initial",animate:"animate",exit:"exit",variants:Xe(t)}),re=r.memo(({initialState:e,icon:t,text:n,message:a,duration:s,onFinish:l})=>{const c={maxW:"md",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:"sm"};return D(l,s),d(V,{className:"ui-loading-screen",...W(e),__css:ne(),children:Y(H.div,{__css:c,children:[d(j,{size:"6xl",...t}),d(O,{message:a,noOfLines:3,...n})]})})});re.displayName="ScreenComponent";const ae=r.memo(({initialState:e,icon:t,text:n,message:a,duration:s,onFinish:l})=>{const c={bg:["white","black"],maxW:"md",p:"md",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:"sm",rounded:"md",boxShadow:["lg","dark-lg"]};return D(l,s),d(V,{className:"ui-loading-page",...W(e),__css:ne("transparent"),children:Y(H.div,{as:ge.div,className:"ui-loading-page__inner",...W(e,"scaleFade"),__css:c,children:[d(j,{size:"6xl",...t}),d(O,{message:a,noOfLines:3,...n})]})})});ae.displayName="PageComponent";const oe=r.memo(({initialState:e,icon:t,text:n,message:a,duration:s,onFinish:l})=>{const c={position:"fixed",right:"md",bottom:"md",zIndex:"beerus",bg:["white","black"],maxW:"sm",p:"sm",display:"flex",justifyContent:"center",alignItems:"center",gap:"sm",rounded:"md",boxShadow:["3xl","dark-lg"]};return D(l,s),Y(V,{className:"ui-loading-background",...W(e,"scaleFade"),__css:c,children:[d(j,{size:"xl",...t}),d(O,{message:a,fontSize:"sm",noOfLines:1,...n})]})});oe.displayName="BackgroundComponent";const qe=()=>{const{screen:e,page:t,background:n,custom:a}=r.useContext(te);return{screen:e,page:t,background:n,custom:a}};export{$e as L,qe as u};
