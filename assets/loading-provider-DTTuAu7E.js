import{j as o}from"./jsx-runtime-BpbtHYHY.js";import{u as F}from"./index-DSCI00mi.js";import{r}from"./index-BwPxMuoB.js";import{R as U}from"./Combination-4Rar1Jsv.js";import{L as w}from"./loading-C3oE1vJx.js";import{m as N}from"./memo-CPHdbx3K.js";import{n as g,o as G,p as H,b as P,q as J}from"./factory-B_KMcXyW.js";import{A as K}from"./index-2ihZSkad.js";import{P as Q}from"./portal-DnDmgWrA.js";import{f as k}from"./forward-ref-Ukjd1cIW.js";import{m as j}from"./factory-CplEbptb.js";const A=r.createContext({}),_=()=>({finish:r.createRef(),force:r.createRef(),isLoading:r.createRef(),start:r.createRef(),update:r.createRef()}),C=e=>({finish:()=>{var a,n;return(n=(a=e.current.finish).current)==null?void 0:n.call(a)},force:a=>{var n,t;return(t=(n=e.current.force).current)==null?void 0:t.call(n,a)},isLoading:()=>{var a,n;return((n=(a=e.current.isLoading).current)==null?void 0:n.call(a))??!1},start:a=>{var n,t;return(t=(n=e.current.start).current)==null?void 0:t.call(n,a)},update:a=>{var n,t;return(t=(n=e.current.update).current)==null?void 0:t.call(n,a)}}),X=e=>e+1,Y=e=>e===0?e:e-1,Z=({background:e,children:a,custom:n,page:t,screen:c})=>{const i=r.useRef(_()),s=r.useRef(_()),f=r.useRef(_()),m=r.useRef(_()),R=C(i),p=C(s),L=C(f),v=C(m),y={background:L,custom:v,page:p,screen:R};return o.jsxs(A.Provider,{value:y,children:[a,o.jsx(b,{controlRefs:i,...c,component:(c==null?void 0:c.component)??((l,d)=>o.jsx(I,{ref:d,...l}))}),o.jsx(b,{controlRefs:s,...t,component:(t==null?void 0:t.component)??((l,d)=>o.jsx(O,{ref:d,...l}))}),o.jsx(b,{controlRefs:f,...e,blockScrollOnMount:(e==null?void 0:e.blockScrollOnMount)??!1,component:(e==null?void 0:e.component)??((l,d)=>o.jsx(E,{ref:d,...l}))}),o.jsx(b,{blockScrollOnMount:(e==null?void 0:e.blockScrollOnMount)??!1,controlRefs:m,...n,component:n==null?void 0:n.component})]})};Z.__ui__="LoadingProvider";const b=({allowPinchZoom:e=!1,appendToParentPortal:a,blockScrollOnMount:n=!0,component:t,containerRef:c,controlRefs:i,duration:s=null,icon:f,initialState:m,text:R})=>{const p=r.useRef(!1),[{duration:L,loadingCount:v,message:y},l]=r.useState({duration:s,loadingCount:m?1:0,message:void 0}),{finish:d,force:W,isLoading:D,start:V,update:q}=r.useMemo(()=>({finish:()=>{p.current=!1,l(({loadingCount:u})=>({duration:s,loadingCount:Y(u),message:void 0}))},force:({duration:u=s,loadingCount:x=0,message:S})=>{p.current=!!x,l({duration:u,loadingCount:x,message:S})},isLoading:()=>p.current,start:({duration:u=s,message:x}={})=>{p.current=!0,l(({loadingCount:S})=>({duration:u,loadingCount:X(S),message:x}))},update:u=>l(x=>({...x,...u}))}),[s]);g(i.current.isLoading,D),g(i.current.start,V),g(i.current.finish,d),g(i.current.update,q),g(i.current.force,W);const T={duration:L,icon:f,initialState:m,message:y,text:R,onFinish:d};return G(()=>{(m||H(s))&&l({duration:s,loadingCount:m?1:0,message:void 0})},[m,s]),o.jsx(K,{initial:!1,children:v?o.jsx(Q,{appendToParentPortal:a,containerRef:c,children:o.jsx(U,{allowPinchZoom:e,enabled:n,forwardProps:!0,children:o.jsx(M,{component:t,...T})})}):null})};b.__ui__="Controller";const M=k(({component:e,...a},n)=>typeof e=="function"?e(a,n):null);M.displayName="Render";M.__ui__="Render";const z=({message:e,...a})=>e?J(e)?e:o.jsx(P.p,{...a,children:e}):null,$=(e="fade")=>({animate:{opacity:1,scale:e==="scaleFade"?1:void 0,transition:{duration:.4,ease:[.4,0,.2,1]}},exit:{opacity:0,scale:e==="scaleFade"?.95:void 0,transition:{duration:.4,ease:[.4,0,1,1]}},initial:{opacity:0,scale:e==="scaleFade"?.95:void 0}}),B=(e="fill")=>({alignItems:"center",bg:e==="fill"?["fallback(white, #fbfbfb)","fallback(black, #141414)"]:"fallback(blackAlpha.600, rgba(0, 0, 0, 0.48))",bottom:0,display:"flex",h:"100dvh",justifyContent:"center",left:0,p:"fallback(4, 1rem)",position:"fixed",right:0,top:0,w:"100vw",zIndex:"fallback(beerus, 9999)"}),h=(e,a="fade")=>({animate:"animate",exit:"exit",initial:e?!1:"initial",variants:$(a)}),I=N(k(({duration:e,icon:a,initialState:n,message:t,text:c,onFinish:i},s)=>{const f={alignItems:"center",display:"flex",flexDirection:"column",gap:"fallback(2, 0.5rem)",justifyContent:"center",maxW:"24rem"};return F(i,e),o.jsx(j.div,{ref:s,className:"ui-loading-screen",...h(n),__css:B(),children:o.jsxs(P.div,{__css:f,children:[o.jsx(w,{fontSize:"6xl",...a}),o.jsx(z,{lineClamp:3,message:t,...c})]})})}));I.displayName="ScreenComponent";I.__ui__="ScreenComponent";const O=N(k(({duration:e,icon:a,initialState:n,message:t,text:c,onFinish:i},s)=>{const f={alignItems:"center",bg:["fallback(white, #fbfbfb)","fallback(black, #141414)"],boxShadow:["fallback(lg, 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05))","fallback(dark-lg, 0px 0px 0px 1px rgba(0, 0, 0, 0.1), 0px 5px 10px rgba(0, 0, 0, 0.2), 0px 15px 40px rgba(0, 0, 0, 0.4))"],display:"flex",flexDirection:"column",gap:"fallback(2, 0.5rem)",justifyContent:"center",maxW:"24rem",p:"fallback(4, 1rem)",rounded:"fallback(md, 0.375rem)"};return F(i,e),o.jsx(j.div,{ref:s,className:"ui-loading-page",...h(n),__css:B("transparent"),children:o.jsxs(j.div,{className:"ui-loading-page__inner",...h(n,"scaleFade"),__css:f,children:[o.jsx(w,{fontSize:"6xl",...a}),o.jsx(z,{lineClamp:3,message:t,...c})]})})}));O.displayName="PageComponent";O.__ui__="PageComponent";const E=N(k(({duration:e,icon:a,initialState:n,message:t,text:c,onFinish:i},s)=>{const f={alignItems:"center",bg:["fallback(white, #fbfbfb)","fallback(black, #141414)"],bottom:"fallback(4, 1rem)",boxShadow:["fallback(3xl, 0 25px 50px -12px rgba(0, 0, 0, 0.25), 0 -25px 50px -12px rgba(0, 0, 0, 0.25))","fallback(dark-lg, 0px 0px 0px 1px rgba(0, 0, 0, 0.1), 0px 5px 10px rgba(0, 0, 0, 0.2), 0px 15px 40px rgba(0, 0, 0, 0.4))"],display:"flex",gap:"fallback(2, 0.5rem)",justifyContent:"center",maxW:"20rem",p:"fallback(2, 0.5rem)",position:"fixed",right:"fallback(4, 1rem)",rounded:"fallback(md, 0.375rem)",zIndex:"fallback(beerus, 9999)"};return F(i,e),o.jsxs(j.div,{ref:s,className:"ui-loading-background",...h(n,"scaleFade"),__css:f,children:[o.jsx(w,{fontSize:"xl",...a}),o.jsx(z,{fontSize:"sm",lineClamp:1,message:t,...c})]})}));E.displayName="BackgroundComponent";E.__ui__="BackgroundComponent";const me=()=>{const{background:e,custom:a,page:n,screen:t}=r.useContext(A);return r.useMemo(()=>({background:e,custom:a,page:n,screen:t}),[e,a,n,t])};export{Z as L,me as u};
