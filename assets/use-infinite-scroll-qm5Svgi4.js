import{r as n,au as z,ag as A,a2 as R}from"./iframe-5QspZtQ-.js";const k=(m,b)=>{const g=getComputedStyle(m);return["auto","overlay","scroll"].includes(g.overflow)?!0:b?["auto","overlay","scroll"].includes(g.overflowY):["auto","overlay","scroll"].includes(g.overflowX)},J=({behavior:m,disabled:b=!1,indexRef:g,initialLoad:S=!1,orientation:F="vertical",resetRef:D,reverse:l=!1,rootMargin:B,rootRef:c,startIndex:P=S?0:1,threshold:H,onLoad:X}={})=>{const w=n.useRef(null),{getDocument:v,getWindow:y}=z(),p=n.useRef(P),h=n.useRef(!1),x=n.useRef(void 0),[Y,O]=n.useState(!1),T=A(X),o=F==="vertical",d=o?"top":"left",E=n.useMemo(()=>({root:c?.current,rootMargin:B,threshold:H}),[B,c,H]),j=n.useCallback((u=1,r=!0)=>{if(p.current=u,O(!1),r){const t=c?.current,s=v()?.body,e=t&&k(t,o)?t:s;if(e){const i=e===s?y():e,a=l?o?e.scrollHeight:e.scrollWidth:0;i?.scrollTo({behavior:m,[d]:a})}}b||setTimeout(()=>{const t=x.current,s=w.current;s&&t?.observe(s)})},[b,c,v,o,y,l,m,d]),C=n.useCallback(()=>{const u=x.current,r=w.current;r&&u?.unobserve(r),O(!0)},[]),I=n.useCallback(()=>new IntersectionObserver(async([r])=>{const t=c?.current,s=v()?.body,e=t&&k(t,o)?t:s;if(!r?.isIntersecting||h.current||!e)return;const i={entry:r,finish:C,index:p.current};h.current=!0,t&&(t.ariaBusy="true");let a=0;l&&(a=o?e.scrollHeight:e.scrollWidth),await T(i),l&&setTimeout(()=>{const f=e===s?y():e,W=(o?e.scrollHeight:e.scrollWidth)-a;f?.scrollTo({[d]:W})}),p.current+=1,h.current=!1,t&&(t.ariaBusy="false")},E),[E,c,v,o,C,l,T,y,d]);return n.useEffect(()=>{(async()=>{const r=w.current,t=p.current,s=c?.current;if(S&&(h.current=!0,s&&(s.ariaBusy="true"),await T({finish:C,index:t}),p.current+=1,h.current=!1,s&&(s.ariaBusy="false")),b)return;x.current=I();const e=x.current;if(l){const i=c?.current,a=v()?.body,f=i&&k(i,o)?i:a;if(f){const W=f===a?y():f,q=o?f.scrollHeight:f.scrollWidth;W?.scrollTo({[d]:q})}}return setTimeout(()=>{r&&e.observe(r)}),()=>{r&&e.unobserve(r)}})()},[I,S,b,l,o,C,T,c,v,y,d]),R(D,j),R(g,u=>p.current=u),{ref:w,finish:Y}};export{J as u};
