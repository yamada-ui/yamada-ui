import{c as de,A as me,r,i as k,D as pe,l as W,B as ee,aJ as ne,f as Ce,h as re,j as t,b as xe,a as be,g as Pe,E as ae,s as ue}from"./iframe-Bn8cMbTR.js";import{u as he,a as ge,c as fe,b as ve,C as Se,d as Ie,s as je,e as ke,f as Me,g as ye}from"./index-CFjvKE73.js";import{u as Oe}from"./index-DxOQ1YS9.js";import{u as Ee}from"./use-field-props-DWTQjhl6.js";import{X as Ge}from"./x-icon-CUNqek_Z.js";import{u as Ae}from"./input-B_qih2xR.js";import{u as De}from"./group-B5LsnOu4.js";import{u as Fe,P as Re,a as Ve,b as we}from"./popover-CmReBfwG.js";import{u as Be}from"./use-input-border-Ce8BP_Cj.js";import{I as Le,a as Te}from"./input-group-5VswQsqo.js";import{C as Ke}from"./check-icon-VJjcEg-S.js";import{C as Ne}from"./chevron-down-icon-Clg8-VC2.js";const Xe=({count:s,index:n,label:p,separator:l,value:c})=>{const m=s-1===n;return t.jsxs("span",{style:{marginInlineEnd:"var(--gap)"},"data-placeholder":xe(c===""),children:[p,m?null:l]})},[Je,Ue]=de({name:"SelectContext"}),We=(s={})=>{const{t:n}=me("select"),{context:{labelId:p}={},props:{multiple:l=!1,closeOnSelect:c=!l,defaultValue:m=l?[]:"",disabled:C,includePlaceholder:a=!l,items:P=[],max:h,placeholder:u,readOnly:M,render:y=Xe,separator:g=",",value:q,onChange:z,...L},ariaProps:T,dataProps:f,eventProps:K}=Ee(s),[d,v]=Oe({defaultValue:m,value:q,onChange:z}),O=r.useCallback(e=>{v(o=>k(o)?o.includes(e)?o.filter(i=>i!==e):!pe(h)||o.length<h?[...o,e]:o:e)},[h,v]),S=r.useMemo(()=>{const e=[...P];return u&&e.unshift({hidden:!a,label:u,value:""}),e},[P,u,a]),F=r.useMemo(()=>!S.filter(({hidden:e})=>!e).length,[S]),{descendants:N,interactive:X,open:E,getContentProps:R,getSeparatorProps:V,getTriggerProps:x,onActiveDescendant:H,onClose:Q,onOpen:Y,onSelect:Z}=he({closeOnSelect:c,disabled:C,initialFocusValue:k(d)?d[0]:d,readOnly:M,onChange:O,...T,...f,...K,...L}),G=r.useMemo(()=>{const e={};return S.forEach(o=>{"items"in o?o.items.forEach(i=>{i.value??=W(i.label)?i.label:void 0,ee(i.value)||(e[i.value]=i)}):(o.value??=W(o.label)?o.label:void 0,ee(o.value)||(e[o.value]=o))}),e},[S]),A=r.useMemo(()=>k(d)?d.length?ne(d.map(e=>G[e])):u?[{label:u,value:""}]:[]:W(d)?ne(G[d]):[],[u,d,G]),w=r.useMemo(()=>{const e=A.length;return A.map((o,i)=>{const j=y({count:e,index:i,separator:g,onClear:se=>{se?.preventDefault(),se?.stopPropagation(),o.value&&O(o.value)},...o});return r.isValidElement(j)?r.cloneElement(j,{...j.props,key:i}):j})},[O,y,A,g]),I=r.useCallback(()=>{v(e=>k(e)?[]:"")},[v]),D=r.useCallback(e=>({...f,...e}),[f]),J=r.useCallback(({"aria-labelledby":e,...o}={})=>x({"aria-label":u,"aria-labelledby":Ce(e,p),...o,children:w}),[w,x,p,u]),U=r.useCallback(e=>R({hidden:F,...e}),[F,R]),B=r.useCallback(e=>({...f,...e}),[f]),_=r.useCallback((e={})=>B({"aria-label":n("Clear value"),role:"button",tabIndex:0,...e,onClick:re(e.onClick,I),onKeyDown:re(e.onKeyDown,o=>be(o,{Enter:I,Space:I}))}),[B,I,n]);return{descendants:N,includePlaceholder:a,interactive:X,items:S,max:h,open:E,placeholder:u,setValue:v,value:d,valueMap:G,getClearIconProps:_,getContentProps:U,getFieldProps:J,getIconProps:B,getRootProps:D,getSeparatorProps:V,onActiveDescendant:H,onChange:O,onClose:Q,onOpen:Y,onSelect:Z}},qe=({children:s,closeOnSelect:n,disabled:p,hidden:l,value:c,...m}={})=>{const{max:C,value:a}=Ue();c??=W(s)?s:void 0;const P=k(a)?!ee(c)&&a.includes(c):a===c,h=pe(C)&&k(a)&&a.length>=C,{getIndicatorProps:u,getItemProps:M}=ge({children:s,closeOnSelect:n,disabled:p||l||h&&!P,hidden:l,selected:P,value:c,...m}),y=r.useCallback((g={})=>M(g),[M]);return{getIndicatorProps:u,getOptionProps:y}},{ComponentContext:ze,useComponentContext:oe,withContext:b,withProvider:He}=Pe("select",je),io=He(s=>{const[n,p]=De(s),[l,{className:c,css:m,colorScheme:C,children:a,clearable:P,clearIcon:h=t.jsx(Ge,{}),errorBorderColor:u,focusBorderColor:M,icon:y,items:g,contentProps:q,elementProps:z,groupProps:L,iconProps:T,optionProps:f,placeholderProps:K,rootProps:d,...v}]=Fe(p,["disabled","open","defaultOpen","onOpen","onClose","openOnClick"]),O=r.useMemo(()=>g||fe(a,{Group:ce,Label:ie,Option:$}),[g,a]),{descendants:S,includePlaceholder:F,interactive:N,items:X,max:E,open:R,placeholder:V,value:x,getClearIconProps:H,getContentProps:Q,getFieldProps:Y,getIconProps:Z,getRootProps:G,getSeparatorProps:A,onActiveDescendant:w,onChange:I,onClose:D,onOpen:J,onSelect:U}=We({items:O,...v}),B=r.useMemo(()=>({animationScheme:"block-start",autoFocus:!1,matchWidth:!0,...l,disabled:!N,open:R,onClose:D,onOpen:J}),[N,D,J,R,l]),_=r.useMemo(()=>a?t.jsxs(t.Fragment,{children:[V?t.jsx($,{...K,hidden:!F,value:"",children:V}):null,a]}):ve(X,{Group:ce,Option:$}),[a,X,V,F,K]),e=Be({errorBorderColor:u,focusBorderColor:M}),o=r.useMemo(()=>({max:E,value:x,onActiveDescendant:w,onChange:I,onClose:D,onSelect:U}),[E,w,I,D,U,x]),i=r.useMemo(()=>({max:E,value:x}),[E,x]),te=r.useMemo(()=>({getSeparatorProps:A,groupProps:L,optionProps:f}),[A,L,f]),j=k(x)?!!x.length:!!x;return t.jsx(Se,{value:S,children:t.jsx(Ie,{value:o,children:t.jsx(Je,{value:i,children:t.jsx(ze,{value:te,children:t.jsxs(Re,{...B,children:[t.jsxs(Le,{className:c,css:m,colorScheme:C,...G({...n,...d}),children:[t.jsx(Ve,{children:t.jsx(Qe,{...Y(e)})}),t.jsx(Te,{clickable:P&&j,...z,children:P&&j?t.jsx(le,{icon:h,...H(T)}):t.jsx(le,{icon:y,...Z(T)})})]}),t.jsx(Ze,{...ae(Q(ae(q))),children:_})]})})})})})},"root")(s=>({...Ae(),...s})),Qe=b("div","field")({"data-group-propagate":""},({children:s,...n})=>({...n,children:t.jsx(Ye,{children:s})})),le=b("div","icon")(void 0,({children:s,icon:n,...p})=>({children:n||s||t.jsx(Ne,{}),...p})),Ye=b("span","valueText")(),Ze=b(we,"content")(),ie=b("span","label")(void 0,s=>{const{getLabelProps:n}=ye();return n(s)}),ce=b(({children:s,label:n,labelProps:p,...l})=>{const{groupProps:c}=oe(),{getGroupProps:m,getLabelProps:C}=ke({...c,...l}),a=r.useMemo(()=>({getLabelProps:C}),[C]);return t.jsx(Me,{value:a,children:t.jsxs(ue.div,{...m(),children:[n?t.jsx(ie,{...p,children:n}):null,s]})})},"group")(),$=b(({children:s,icon:n,...p})=>{const{optionProps:{icon:l,...c}={}}=oe(),{getIndicatorProps:m,getOptionProps:C}=qe({...c,...p});return t.jsxs(ue.div,{...C(),children:[t.jsx(_e,{...m(),children:n??l??t.jsx(Ke,{})}),s]})},"option")(),_e=b("div","indicator")(),mo=b("hr","separator")(void 0,s=>{const{getSeparatorProps:n}=oe();return n(s)});export{io as S,$ as a,ce as b,ie as c,mo as d};
