import{r as m,aB as F,aC as q,N as d,aD as A,aE as T,aq as b}from"./iframe-Bh9OJiMa.js";import{u as p}from"./index-DupE20-r.js";const h=(t,{focusTarget:a,preventScroll:r,shouldFocus:c,visible:u}={preventScroll:!0,shouldFocus:!1})=>{const o=c&&u,e=m.useRef(!1),s=m.useCallback(()=>F(t)?t.current:t,[t]),n=m.useCallback(()=>F(a)?a.current:a,[a]),g=m.useCallback(()=>{const i=s();if(!i||!o||e.current||i.contains(document.activeElement))return;const f=n();if(f)requestAnimationFrame(()=>{f.focus({preventScroll:r}),e.current=!0});else{const l=q(i);requestAnimationFrame(l?()=>{l.focus({preventScroll:r}),e.current=!0}:()=>{i.focus({preventScroll:r}),e.current=!0})}},[s,o,n,r]);d(()=>{e.current=!o},[o]),d(()=>{requestAnimationFrame(g)},[g]),p(s,"transitionend",g)},k=({ref:t,elements:a,enabled:r})=>{p(()=>b(t.current),"pointerdown",c=>{if(!A()||!r)return;const u=c.target,e=(a??[t]).some(s=>{const n=F(s)?s.current:s;return(n==null?void 0:n.contains(u))||n===u});T(b(t.current))!==u&&e&&(c.preventDefault(),u.focus())})};export{k as a,h as u};
