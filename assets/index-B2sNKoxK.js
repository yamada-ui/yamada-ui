import{a0 as d,r as u,at as l}from"./iframe-Cn-KGvUL.js";const f=({ref:t,enabled:i=!0,handler:n})=>{const s=d(n),r=u.useRef({ignoreEmulatedMouseEvents:!1,isPointerDown:!1}),o=u.useCallback(e=>{E(e,t)&&(r.current.isPointerDown=!0)},[t]),c=u.useCallback(e=>{if(r.current.ignoreEmulatedMouseEvents){r.current.ignoreEmulatedMouseEvents=!1;return}r.current.isPointerDown&&n&&E(e,t)&&(r.current.isPointerDown=!1,s(e))},[n,s,t]),a=u.useCallback(e=>{r.current.ignoreEmulatedMouseEvents=!0,r.current.isPointerDown&&n&&E(e,t)&&(r.current.isPointerDown=!1,s(e))},[n,s,t]);u.useEffect(()=>{if(!i)return;const e=l(t.current);return e.addEventListener("mousedown",o,!0),e.addEventListener("mouseup",c,!0),e.addEventListener("touchstart",o,!0),e.addEventListener("touchend",a,!0),()=>{e.removeEventListener("mousedown",o,!0),e.removeEventListener("mouseup",c,!0),e.removeEventListener("touchstart",o,!0),e.removeEventListener("touchend",a,!0)}},[n,t,s,r,i,o,c,a])},E=(t,i)=>{const n=t.target;return"button"in t&&t.button>0||n&&!l(n).contains(n)?!1:!i.current?.contains(n)};export{f as u};
