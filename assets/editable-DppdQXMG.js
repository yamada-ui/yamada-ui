import{d as le,c as ue,a6 as ce,r as n,at as M,a8 as de,O as be,h as u,m as E,f as fe,g as ge,j as N,s as Ce}from"./iframe-DiGnZRjA.js";import{u as me}from"./index-CGoP7FpN.js";import{a as pe}from"./index-D8QFsB6L.js";import{u as he}from"./use-field-props-L_63C1ib.js";import{u as ve}from"./use-input-border-Dca4H7wR.js";const Ee=le({base:{control:{alignItems:"start",display:"inline-flex",gap:"sm"},input:{bg:"transparent",focusRingColor:"{focus-border-color}",focusVisibleRing:"inside",fontSize:"inherit",fontWeight:"inherit",minH:"1lh",p:"1",rounded:"l2",textAlign:"inherit",transitionDuration:"moderate",transitionProperty:"common",w:"full",_invalid:{borderColor:"{error-border-color}",focusRingColor:"{error-border-color}"},_disabled:{layerStyle:"disabled"}},preview:{bg:"transparent",cursor:"text",display:"inline-block",fontSize:"inherit",fontWeight:"inherit",minH:"1lh",p:"1",rounded:"l2",textAlign:"inherit",transitionDuration:"moderate",transitionProperty:"common",whiteSpace:"pre-line",_hover:{bg:"bg.subtle"},_readOnly:{pointerEvents:"none"},_disabled:{layerStyle:"disabled"}},root:{alignItems:"start",display:"inline-flex",gap:"sm",position:"relative",w:"full"},textarea:{bg:"transparent",boxSizing:"content-box",focusRingColor:"{focus-border-color}",focusVisibleRing:"inside",fontSize:"inherit",fontWeight:"inherit",minH:"1lh",p:"1",rounded:"l2",textAlign:"inherit",transitionDuration:"moderate",transitionProperty:"common",w:"full",_invalid:{borderColor:"{error-border-color}",focusRingColor:"{error-border-color}"},_disabled:{layerStyle:"disabled"}}}}),[Pe,C]=ue({name:"EditableContext"}),ye=(a={})=>{const{props:{id:r,defaultValue:T,disabled:s,placeholder:c,previewFocusable:I=!0,readOnly:p,required:h,selectAllOnFocus:P=!0,startWithEditView:V,submitOnBlur:k=!0,value:K,onCancel:x,onChange:Q,onEdit:X,onSubmit:j,...z},ariaProps:S,dataProps:i,eventProps:b}=he(a),H=ce(X),[o,_]=n.useState(!!V&&!s),[l,w]=me({defaultValue:T||"",value:K,onChange:Q}),R=!o&&!s,U=l.length===0,[O,q]=n.useState(l),f=n.useRef(null),Y=n.useRef(null),L=n.useRef(null),A=n.useRef(null),W=n.useRef(null),D=n.useCallback(e=>w(e.currentTarget.value),[w]),v=n.useCallback(()=>q(l),[l]),y=n.useCallback(()=>{R&&_(!0)},[R]),d=n.useCallback(()=>{_(!1),w(O),x?.(O)},[O,x,w]),g=n.useCallback(()=>{_(!1),q(l),j?.(l)},[j,l]),G=n.useCallback(e=>{if(!(e.key!=="Escape"&&e.key!=="Enter"))if(e.preventDefault(),e.key==="Escape")d();else{const{metaKey:t,shiftKey:B}=e;!B&&!t&&g()}},[d,g]),J=n.useCallback(e=>{e.key==="Escape"&&(e.preventDefault(),d())},[d]),F=n.useCallback(e=>{if(!o)return;const t=e.currentTarget.ownerDocument,B=e.relatedTarget??t.activeElement,ie=M(A.current,B),se=M(W.current,B);!ie&&!se&&(k?g():d())},[o,k,g,d]);pe({ref:f,elements:[A,W],enabled:o}),de(()=>{o&&(f.current?.focus(),P&&f.current?.select())},[]),be(()=>{if(!o){L.current?.focus();return}f.current?.focus(),P&&f.current?.select(),H()},[o,H,P]),n.useEffect(()=>{if(o)return;const e=f.current;e?.ownerDocument.activeElement===e&&e?.blur()},[o]);const Z=n.useCallback(e=>({...z,...i,...e}),[z,i]),$=n.useCallback(({ref:e,...t}={})=>({...i,...t,ref:E(Y,e),children:U?c:l,hidden:o,tabIndex:R&&I?0:void 0,onFocus:u(t.onFocus,y,v)}),[i,o,R,I,U,y,v,c,l]),ee=n.useCallback(({ref:e,...t}={})=>({...i,...S,...t,id:r,ref:E(f,e),disabled:s,hidden:!o,placeholder:c,readOnly:p,required:h,value:l,onBlur:u(b.onBlur,t.onBlur,F),onChange:u(t.onChange,D),onFocus:u(b.onFocus,t.onFocus,v),onKeyDown:u(t.onKeyDown,G)}),[i,S,r,s,o,c,p,h,l,b.onBlur,b.onFocus,F,D,v,G]),te=n.useCallback(({ref:e,...t}={})=>({...i,...S,...t,id:r,ref:E(f,e),disabled:s,hidden:!o,placeholder:c,readOnly:p,required:h,value:l,onBlur:u(b.onBlur,t.onBlur,F),onChange:u(t.onChange,D),onFocus:u(b.onFocus,t.onFocus,v),onKeyDown:u(t.onKeyDown,J)}),[i,S,r,s,o,c,p,h,l,b.onBlur,b.onFocus,F,D,v,J]),ne=n.useCallback(e=>({...i,role:"group",...e}),[i]),oe=n.useCallback(({ref:e,...t}={})=>({...i,...t,ref:E(L,e),disabled:s,hidden:o,onClick:u(t.onClick,y)}),[i,s,o,y]),re=n.useCallback(({ref:e,...t}={})=>({...i,...t,ref:E(W,e),disabled:s,hidden:!o,onClick:u(t.onClick,g)}),[i,s,o,g]),ae=n.useCallback(({ref:e,...t}={})=>({...i,...t,ref:E(A,e),disabled:s,hidden:!o,onClick:u(t.onClick,d)}),[i,s,o,d]);return{editing:o,value:l,getCancelProps:ae,getControlProps:ne,getEditProps:oe,getInputProps:ee,getPreviewProps:$,getRootProps:Z,getSubmitProps:re,getTextareaProps:te,onCancel:d,onEdit:y,onSubmit:g}},{withContext:m,withProvider:ke}=fe("editable",Ee),Be=ke(({children:a,errorBorderColor:r,focusBorderColor:T,...s})=>{const{editing:c,value:I,getRootProps:p,onCancel:h,onEdit:P,onSubmit:V,...k}=ye(s),K=ve({errorBorderColor:r,focusBorderColor:T}),x=ge(a,{editing:c,onCancel:h,onEdit:P,onSubmit:V});return N.jsx(Pe,{value:{editing:c,...k},children:N.jsx(Ce.div,{...p(),...K,children:x})})})(),Te=m("span","preview")(void 0,a=>{const{getPreviewProps:r}=C();return{...r(a)}}),Ie=m("input","input")(void 0,a=>{const{getInputProps:r}=C();return{...r(a)}}),Ve=m("textarea","textarea")(void 0,a=>{const{getTextareaProps:r}=C();return{...r(a)}}),Ke=m("div","control")(void 0,a=>{const{getControlProps:r}=C();return{...r(a)}}),_e=m("button",{name:"EditTrigger",slot:["trigger","edit"]})(void 0,a=>{const{getEditProps:r}=C();return{asChild:!0,...r(a)}}),Oe=m("button",{name:"CancelTrigger",slot:["trigger","cancel"]})(void 0,a=>{const{getCancelProps:r}=C();return{asChild:!0,...r(a)}}),Ae=m("button",{name:"SubmitTrigger",slot:["trigger","submit"]})(void 0,a=>{const{getSubmitProps:r}=C();return{asChild:!0,...r(a)}});export{Be as E,Te as a,Ie as b,Ve as c,Ke as d,_e as e,Ae as f,Oe as g,C as u};
