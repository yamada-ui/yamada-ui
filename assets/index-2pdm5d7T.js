import{r as f}from"./index-BwPxMuoB.js";import{s as m,G as d}from"./factory-B_KMcXyW.js";const w=({ref:e,enabled:u=!0,handler:t})=>{const s=m(t),n=f.useRef({ignoreEmulatedMouseEvents:!1,isPointerDown:!1});f.useEffect(()=>{if(!u)return;const i=o=>{c(o,e)&&(n.current.isPointerDown=!0)},a=o=>{if(n.current.ignoreEmulatedMouseEvents){n.current.ignoreEmulatedMouseEvents=!1;return}n.current.isPointerDown&&t&&c(o,e)&&(n.current.isPointerDown=!1,s(o))},E=o=>{n.current.ignoreEmulatedMouseEvents=!0,t&&n.current.isPointerDown&&c(o,e)&&(n.current.isPointerDown=!1,s(o))},r=d(e.current);return r.addEventListener("mousedown",i,!0),r.addEventListener("mouseup",a,!0),r.addEventListener("touchstart",i,!0),r.addEventListener("touchend",E,!0),()=>{r.removeEventListener("mousedown",i,!0),r.removeEventListener("mouseup",a,!0),r.removeEventListener("touchstart",i,!0),r.removeEventListener("touchend",E,!0)}},[t,e,s,n,u])},c=(e,u)=>{var s;const t=e.target;return"button"in e&&e.button>0||t&&!d(t).contains(t)?!1:!((s=u.current)!=null&&s.contains(t))};export{w as u};
