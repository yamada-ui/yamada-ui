import{c as _,r as E,a7 as C,m as P,a8 as m,g as S}from"./iframe-BHpF9Anv.js";const v=n=>n.sort((o,c)=>{const s=o.compareDocumentPosition(c);return s&Node.DOCUMENT_POSITION_FOLLOWING||s&Node.DOCUMENT_POSITION_CONTAINED_BY?-1:s&Node.DOCUMENT_POSITION_PRECEDING||s&Node.DOCUMENT_POSITION_CONTAINS?1:((s&Node.DOCUMENT_POSITION_DISCONNECTED||s&Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC)&&console.warn("Cannot sort the given nodes."),0)}),T=(n,o,c)=>{let s=n+1;return c&&s>=o&&(s=0),s},V=(n,o,c)=>{let s=n-1;return c&&s<0&&(s=o),s},p=()=>{const n=new Map,o=e=>{n.forEach(t=>{const r=e.indexOf(t.node);t.index=r,t.node.dataset.index=t.index.toString()})},c=(e,t)=>{if(!e||n.has(e))return;const r=Array.from(n.keys()).concat(e),x=v(r),N={...t,index:-1,node:e};n.set(e,N),o(x)},s=()=>n.clear(),D=e=>t=>c(t,e),u=e=>{if(e==null)return;n.delete(e);const t=v(Array.from(n.keys()));o(t)},a=()=>I().length,d=()=>i().length,b=e=>{if(!e||m(e.dataset.activedescendant))return;i().forEach(({node:r})=>{delete r.dataset.activedescendant}),e.dataset.activedescendant="",e.focus()},g=e=>e?n.get(e)?.index??-1:-1,O=e=>e==null?-1:i().findIndex(({node:t})=>t.isSameNode(e)),I=()=>Array.from(n.values()).sort((e,t)=>e.index-t.index),i=()=>I().filter(({disabled:e,node:t})=>!S(e,t)),l=e=>{if(a())return I()[e]},f=e=>{if(d())return i()[e]};return{count:a,destroy:s,enabledCount:d,enabledFirstValue:()=>f(0),enabledIndexOf:O,enabledLastValue:()=>f(d()-1),enabledNextValue:(e,t=!0)=>{const r=l(e);if(!r)return;const x=O(r.node),N=T(x,d(),t);return f(N)},enabledPrevValue:(e,t=!0)=>{const r=l(e);if(!r)return;const x=O(r.node),N=V(x,d()-1,t);return f(N)},enabledValue:f,enabledValues:i,firstValue:()=>l(0),focus:b,indexOf:g,lastValue:()=>l(a()-1),nextValue:(e,t=!0)=>{const r=T(e,a(),t);return l(r)},prevValue:(e,t=!0)=>{const r=V(e,a()-1,t);return l(r)},register:D,unregister:u,value:l,values:I}},w=()=>{const[n,o]=_({name:"DescendantsContext"}),c=u=>{const a=E.useRef(null);return C(()=>()=>{a.current&&u?.unregister(a.current)},[]),d=>P(a,u?.register(d))};return{DescendantsContext:n,useDescendant:u=>{const a=o(),d=c(a);return{descendants:a,register:d(u)}},useDescendantRegister:c,useDescendants:()=>{const u=E.useRef(p());return C(()=>()=>u.current.destroy()),u.current},useDescendantsContext:o}};export{w as c};
