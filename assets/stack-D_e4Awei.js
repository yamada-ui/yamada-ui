import{j as k}from"./jsx-runtime-BpbtHYHY.js";import{r as c}from"./index-BwPxMuoB.js";import{f as x}from"./forward-ref-Ukjd1cIW.js";import{r as R,g as z,b as Z,c as W,a as T,e as B}from"./factory-B_KMcXyW.js";const v=x(({className:u,align:r,children:e,direction:a="column",divider:E,gap:s="fallback(md, 1rem)",justify:_,separator:b=E,wrap:C,...y},w)=>{const m=t=>t==="column"||t==="column-reverse",M=c.useMemo(()=>({borderBottomWidth:R(a,t=>m(t)?"1px":0),borderLeftWidth:R(a,t=>m(t)?0:"1px"),h:R(a,t=>m(t)?"fit-content":"100%"),w:R(a,t=>m(t)?"100%":"fit-content")}),[a]),N=z(e),j=b?N.map((t,o)=>{const d=typeof t.key<"u"?t.key:o,l=c.cloneElement(b,{__css:M});return k.jsxs(c.Fragment,{children:[o?l:null,t]},d)}):N,H=c.useMemo(()=>({alignItems:r,display:"flex",flexDirection:a,flexWrap:C,gap:s,justifyContent:_}),[r,a,C,s,_]);return k.jsx(Z.div,{ref:w,className:W("ui-stack",u),__css:H,...y,children:j})});v.displayName="Stack";v.__ui__="Stack";const $=x(({className:u,...r},e)=>k.jsx(v,{ref:e,className:W("ui-stack--horizontal",u),align:"center",direction:"row",...r}));$.displayName="HStack";$.__ui__="HStack";const L=x(({className:u,...r},e)=>k.jsx(v,{ref:e,className:W("ui-stack--vertical",u),align:"stretch",direction:"column",w:"100%",...r}));L.displayName="VStack";L.__ui__="VStack";const F=x(({className:u,children:r,direction:e="bottom",fit:a=!0,gap:E="fallback(md, 1rem)",reverse:s=!1,startIndex:_=0,...b},C)=>{const y=c.useRef(new Map),[w,m]=c.useState({height:0,width:0}),M={minHeight:`${w.height}px`,minWidth:`${w.width}px`},N={overflow:"hidden",position:"relative",vars:[{name:"space",token:"spaces",value:E}],...a?M:{}},j=c.useCallback(o=>e.includes("top")?{[s?"top":"bottom"]:o}:e.includes("bottom")?{[s?"bottom":"top"]:o}:{[s?"bottom":"top"]:0},[e,s]),H=c.useCallback(o=>e.includes("left")?{[s?"left":"right"]:o}:e.includes("right")?{[s?"right":"left"]:o}:{[s?"right":"left"]:0},[e,s]),t=c.useMemo(()=>z(r).map((l,f)=>{const g=c.createRef();y.current.set(f,g);const h=l.key??f,S=_+f,i=`calc($space * ${f})`;let n={};n={...n,position:"absolute",zIndex:S},n={...n,...j(i)},n={...n,...H(i)};const p={...l.props,ref:T(B(l),g),__css:n},V=c.cloneElement(l,p);return k.jsx(c.Fragment,{children:V},h)}),[r,_,j,H]);return c.useEffect(()=>{if(!a)return;let o=e.includes("left"),d=e.includes("top"),l=0,f=0;s&&(o=!o,d=!d);for(const g of y.current.values()){if(!g.current)continue;let{offsetHeight:h,offsetLeft:S,offsetParent:i,offsetTop:n,offsetWidth:p}=g.current;i&&(o&&(S=((i==null?void 0:i.offsetWidth)??0)-S-p),d&&(n=((i==null?void 0:i.offsetHeight)??0)-n-h),p+=S,h+=n,p>l&&(l=p),h>f&&(f=h))}m({height:f,width:l})},[t,e,s,a]),k.jsx(Z.div,{ref:C,className:W("ui-stack--depth",u),__css:N,...b,children:t})});F.displayName="ZStack";F.__ui__="ZStack";export{$ as H,v as S,L as V,F as Z};
