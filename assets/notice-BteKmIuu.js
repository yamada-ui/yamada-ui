import{j as m}from"./jsx-runtime-BpbtHYHY.js";import{r as D}from"./index-BwPxMuoB.js";import{A as E,a as I,b as R,c as k}from"./alert-CFbf-Wsq.js";import{C as B}from"./close-button-DYk-GqDy.js";import{u as C}from"./theme-provider-DGyR61Aa.js";import{m as g,c as S,b as w}from"./factory-B_KMcXyW.js";const O=(r,o)=>r.find(i=>i.id===o),N=(r,o)=>{const i=A(r,o);return{index:i?r[i].findIndex(e=>e.id===o):-1,placement:i}},A=(r,o)=>{for(const[i,c]of Object.entries(r))if(O(c,o))return i};let _=0;const P=(r,{id:o,style:i,duration:c,placement:e="top",status:t,onCloseComplete:n})=>(_+=1,o??(o=_),{id:o,style:i,duration:c,isDelete:!1,message:r,placement:e,status:t,onCloseComplete:n,onDelete:()=>d.remove(String(o),e)}),j=r=>{const{component:o}=r;return c=>typeof o=="function"?o({...c,...r}):m.jsx(b,{...c,...r})},T=(r,o)=>{var t,n;const i=((n=(t=o.__config)==null?void 0:t.notice)==null?void 0:n.options)??{},c=s=>g(i,g(r,s)),e=(s={})=>{s=c(s);const l=j(s);return d.create(l,s)};return e.update=(s,l)=>{l=c(l),d.update(s,l)},e.closeAll=d.closeAll,e.close=d.close,e.isActive=d.isActive,e},Q=r=>{const{theme:o}=C();return D.useMemo(()=>T(r??{},o),[r,o])},z={bottom:[],"bottom-left":[],"bottom-right":[],top:[],"top-left":[],"top-right":[]},F=r=>{let o=r;const i=new Set,c=e=>{o=e(o),i.forEach(t=>t())};return{close:e=>{c(t=>{const n=A(t,e);return n?{...t,[n]:t[n].map(s=>s.id==e?{...s,isDelete:!0}:s)}:t})},closeAll:({placement:e}={})=>{c(t=>{let n=["bottom","bottom-right","bottom-left","top","top-left","top-right"];return e&&(n=e),n.reduce((s,l)=>(s[l]=t[l].map(a=>({...a,isDelete:!0})),s),{...t})})},create:(e,t)=>{const n=t.limit,s=P(e,t),{id:l,placement:a}=s;return c(p=>{let u=p[a];if(n!==void 0&&n>0&&u.length>n-1){const h=u.length-(n-1),v=(a.includes("top")?u.slice(h*-1):u.slice(0,h)).map(({id:f})=>f);u=u.map(f=>v.includes(f.id)?{...f,isDelete:!0}:f)}const x=a.includes("top")?[s,...u]:[...u,s];return{...p,[a]:x}}),l},getSnapshot:()=>o,isActive:e=>!!N(d.getSnapshot(),e).placement,remove:(e,t)=>{c(n=>({...n,[t]:n[t].filter(s=>s.id!=e)}))},subscribe:e=>(i.add(e),()=>{c(()=>r),i.delete(e)}),update:(e,t)=>{c(n=>{const s={...n},{index:l,placement:a}=N(s,e);return a&&l!==-1&&s[a][l]&&(s[a][l]={...s[a][l],...t,message:j(t)}),s})}}},d=F(z),b=({className:r,colorScheme:o,variant:i="basic",closeStrategy:c="button",description:e,icon:t,isClosable:n,status:s,title:l,onClose:a})=>{const p=n&&(c==="button"||c==="both"),u=n&&(c==="element"||c==="both");return m.jsxs(E,{className:S("ui-notice",r),colorScheme:o,variant:i,alignItems:"start",boxShadow:"fallback(lg, 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05))",pe:p?8:void 0,status:s,onClick:u?a:void 0,children:[m.jsx(I,{className:"ui-notice__icon",variant:t==null?void 0:t.variant,...t!=null&&t.color?{color:t.color}:{},children:t==null?void 0:t.children}),m.jsxs(w.div,{flex:"1",children:[l?m.jsx(R,{className:"ui-notice__title",lineClamp:1,children:l}):null,e?m.jsx(k,{className:"ui-notice__desc",lineClamp:3,children:e}):null]}),p?m.jsx(B,{className:"ui-notice__close-button",size:"sm",position:"absolute",right:2,top:2,onClick:x=>{x.stopPropagation(),a==null||a()}}):null]})};b.displayName="Notice";b.__ui__="Notice";export{d as n,Q as u};
