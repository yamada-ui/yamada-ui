import{ag as v,r as i,aq as m,i as d}from"./iframe-BIJNUwA0.js";const w=({ref:t,enabled:u=!0,handler:n})=>{const s=v(n),r=i.useRef({ignoreEmulatedMouseEvents:!1,isPointerDown:!1}),o=i.useCallback(e=>{E(e,t)&&(r.current.isPointerDown=!0)},[t]),c=i.useCallback(e=>{if(r.current.ignoreEmulatedMouseEvents){r.current.ignoreEmulatedMouseEvents=!1;return}r.current.isPointerDown&&n&&E(e,t)&&(r.current.isPointerDown=!1,s(e))},[n,s,t]),a=i.useCallback(e=>{r.current.ignoreEmulatedMouseEvents=!0,r.current.isPointerDown&&n&&E(e,t)&&(r.current.isPointerDown=!1,s(e))},[n,s,t]);i.useEffect(()=>{var l;if(!u)return;const e=m(d(t)?(l=t[0])==null?void 0:l.current:t.current);return e.addEventListener("mousedown",o,!0),e.addEventListener("mouseup",c,!0),e.addEventListener("touchstart",o,!0),e.addEventListener("touchend",a,!0),()=>{e.removeEventListener("mousedown",o,!0),e.removeEventListener("mouseup",c,!0),e.removeEventListener("touchstart",o,!0),e.removeEventListener("touchend",a,!0)}},[n,t,s,r,u,o,c,a])},E=(t,u)=>{var s;const n=t.target;return"button"in t&&t.button>0||n&&!m(n).contains(n)?!1:d(u)?!u.some(r=>{var o;return(o=r.current)==null?void 0:o.contains(n)}):!((s=u.current)!=null&&s.contains(n))};export{w as u};
