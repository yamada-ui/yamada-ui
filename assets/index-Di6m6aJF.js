import{a9 as d,r as i,as as l,i as m}from"./iframe-BHZTlJ0V.js";const f=({ref:t,enabled:o=!0,handler:n})=>{const s=d(n),r=i.useRef({ignoreEmulatedMouseEvents:!1,isPointerDown:!1}),u=i.useCallback(e=>{E(e,t)&&(r.current.isPointerDown=!0)},[t]),c=i.useCallback(e=>{if(r.current.ignoreEmulatedMouseEvents){r.current.ignoreEmulatedMouseEvents=!1;return}r.current.isPointerDown&&n&&E(e,t)&&(r.current.isPointerDown=!1,s(e))},[n,s,t]),a=i.useCallback(e=>{r.current.ignoreEmulatedMouseEvents=!0,r.current.isPointerDown&&n&&E(e,t)&&(r.current.isPointerDown=!1,s(e))},[n,s,t]);i.useEffect(()=>{if(!o)return;const e=l(m(t)?t[0]?.current:t.current);return e.addEventListener("mousedown",u,!0),e.addEventListener("mouseup",c,!0),e.addEventListener("touchstart",u,!0),e.addEventListener("touchend",a,!0),()=>{e.removeEventListener("mousedown",u,!0),e.removeEventListener("mouseup",c,!0),e.removeEventListener("touchstart",u,!0),e.removeEventListener("touchend",a,!0)}},[n,t,s,r,o,u,c,a])},E=(t,o)=>{const n=t.target;return"button"in t&&t.button>0||n&&!l(n).contains(n)?!1:m(o)?!o.some(s=>s.current?.contains(n)):!o.current?.contains(n)};export{f as u};
