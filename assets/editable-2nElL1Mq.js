import{d as le,c as ce,a6 as ue,r as o,as as M,a8 as de,O as be,h as c,m as E,f as fe,g as ge,j as N,s as Ce}from"./iframe-B58gGoPv.js";import{u as me}from"./index-Dp97PSmK.js";import{a as pe}from"./index-CyoDZK2B.js";import{u as he}from"./use-field-props-DAwmxNtQ.js";import{u as ve}from"./use-input-border-CR9ScwU8.js";const Ee=le({base:{control:{alignItems:"start",display:"inline-flex",gap:"sm"},input:{bg:"transparent",focusRingColor:"{focus-border-color}",focusVisibleRing:"inside",fontSize:"inherit",fontWeight:"inherit",minH:"1lh",p:"1",rounded:"l2",textAlign:"inherit",transitionDuration:"moderate",transitionProperty:"common",w:"full",_invalid:{borderColor:"{error-border-color}",focusRingColor:"{error-border-color}"},_disabled:{layerStyle:"disabled"}},preview:{bg:"transparent",cursor:"text",display:"inline-block",fontSize:"inherit",fontWeight:"inherit",minH:"1lh",p:"1",rounded:"l2",textAlign:"inherit",transitionDuration:"moderate",transitionProperty:"common",whiteSpace:"pre-line",_hover:{bg:"bg.subtle"},_readOnly:{pointerEvents:"none"},_disabled:{layerStyle:"disabled"}},root:{"--error-border-color":"colors.border.error","--focus-border-color":"colorScheme.outline",alignItems:"start",display:"inline-flex",gap:"sm",position:"relative",w:"full"},textarea:{bg:"transparent",boxSizing:"content-box",focusRingColor:"{focus-border-color}",focusVisibleRing:"inside",fontSize:"inherit",fontWeight:"inherit",minH:"1lh",p:"1",rounded:"l2",textAlign:"inherit",transitionDuration:"moderate",transitionProperty:"common",w:"full",_invalid:{borderColor:"{error-border-color}",focusRingColor:"{error-border-color}"},_disabled:{layerStyle:"disabled"}}}}),[Pe,C]=ce({name:"EditableContext"}),ye=(s={})=>{const{props:{id:r,defaultValue:T,disabled:a,placeholder:u,previewFocusable:I=!0,readOnly:p,required:h,selectAllOnFocus:P=!0,startWithEditView:V,submitOnBlur:k=!0,value:K,onCancel:S,onChange:Q,onEdit:X,onSubmit:j,...z},ariaProps:x,dataProps:i,eventProps:b}=he(s),H=ue(X),[n,_]=o.useState(!!V&&!a),[l,w]=me({defaultValue:T||"",value:K,onChange:Q}),R=!n&&!a,U=l.length===0,[O,q]=o.useState(l),f=o.useRef(null),Y=o.useRef(null),L=o.useRef(null),A=o.useRef(null),W=o.useRef(null),D=o.useCallback(e=>w(e.currentTarget.value),[w]),v=o.useCallback(()=>q(l),[l]),y=o.useCallback(()=>{R&&_(!0)},[R]),d=o.useCallback(()=>{_(!1),w(O),S?.(O)},[O,S,w]),g=o.useCallback(()=>{_(!1),q(l),j?.(l)},[j,l]),G=o.useCallback(e=>{if(!(e.key!=="Escape"&&e.key!=="Enter"))if(e.preventDefault(),e.key==="Escape")d();else{const{metaKey:t,shiftKey:B}=e;!B&&!t&&g()}},[d,g]),J=o.useCallback(e=>{e.key==="Escape"&&(e.preventDefault(),d())},[d]),F=o.useCallback(e=>{if(!n)return;const t=e.currentTarget.ownerDocument,B=e.relatedTarget??t.activeElement,ie=M(A.current,B),ae=M(W.current,B);!ie&&!ae&&(k?g():d())},[n,k,g,d]);pe({ref:f,elements:[A,W],enabled:n}),de(()=>{n&&(f.current?.focus(),P&&f.current?.select())},[]),be(()=>{if(!n){L.current?.focus();return}f.current?.focus(),P&&f.current?.select(),H()},[n,H,P]),o.useEffect(()=>{if(n)return;const e=f.current;e?.ownerDocument.activeElement===e&&e?.blur()},[n]);const Z=o.useCallback(e=>({...z,...i,...e}),[z,i]),$=o.useCallback(({ref:e,...t}={})=>({...i,...t,ref:E(Y,e),children:U?u:l,hidden:n,tabIndex:R&&I?0:void 0,onFocus:c(t.onFocus,y,v)}),[i,n,R,I,U,y,v,u,l]),ee=o.useCallback(({ref:e,...t}={})=>({...i,...x,...t,id:r,ref:E(f,e),disabled:a,hidden:!n,placeholder:u,readOnly:p,required:h,value:l,onBlur:c(b.onBlur,t.onBlur,F),onChange:c(t.onChange,D),onFocus:c(b.onFocus,t.onFocus,v),onKeyDown:c(t.onKeyDown,G)}),[i,x,r,a,n,u,p,h,l,b.onBlur,b.onFocus,F,D,v,G]),te=o.useCallback(({ref:e,...t}={})=>({...i,...x,...t,id:r,ref:E(f,e),disabled:a,hidden:!n,placeholder:u,readOnly:p,required:h,value:l,onBlur:c(b.onBlur,t.onBlur,F),onChange:c(t.onChange,D),onFocus:c(b.onFocus,t.onFocus,v),onKeyDown:c(t.onKeyDown,J)}),[i,x,r,a,n,u,p,h,l,b.onBlur,b.onFocus,F,D,v,J]),oe=o.useCallback(e=>({...i,role:"group",...e}),[i]),ne=o.useCallback(({ref:e,...t}={})=>({...i,...t,ref:E(L,e),disabled:a,hidden:n,onClick:c(t.onClick,y)}),[i,a,n,y]),re=o.useCallback(({ref:e,...t}={})=>({...i,...t,ref:E(W,e),disabled:a,hidden:!n,onClick:c(t.onClick,g)}),[i,a,n,g]),se=o.useCallback(({ref:e,...t}={})=>({...i,...t,ref:E(A,e),disabled:a,hidden:!n,onClick:c(t.onClick,d)}),[i,a,n,d]);return{editing:n,value:l,getCancelProps:se,getControlProps:oe,getEditProps:ne,getInputProps:ee,getPreviewProps:$,getRootProps:Z,getSubmitProps:re,getTextareaProps:te,onCancel:d,onEdit:y,onSubmit:g}},{withContext:m,withProvider:ke}=fe("editable",Ee),Be=ke(({children:s,errorBorderColor:r,focusBorderColor:T,...a})=>{const{editing:u,value:I,getRootProps:p,onCancel:h,onEdit:P,onSubmit:V,...k}=ye(a),K=ve({errorBorderColor:r,focusBorderColor:T}),S=ge(s,{editing:u,onCancel:h,onEdit:P,onSubmit:V});return N.jsx(Pe,{value:{editing:u,...k},children:N.jsx(Ce.div,{...p(),...K,children:S})})})(),Te=m("span","preview")(void 0,s=>{const{getPreviewProps:r}=C();return{...r(s)}}),Ie=m("input","input")(void 0,s=>{const{getInputProps:r}=C();return{...r(s)}}),Ve=m("textarea","textarea")(void 0,s=>{const{getTextareaProps:r}=C();return{...r(s)}}),Ke=m("div","control")(void 0,s=>{const{getControlProps:r}=C();return{...r(s)}}),_e=m("button",{name:"EditTrigger",slot:["trigger","edit"]})(void 0,s=>{const{getEditProps:r}=C();return{asChild:!0,...r(s)}}),Oe=m("button",{name:"CancelTrigger",slot:["trigger","cancel"]})(void 0,s=>{const{getCancelProps:r}=C();return{asChild:!0,...r(s)}}),Ae=m("button",{name:"SubmitTrigger",slot:["trigger","submit"]})(void 0,s=>{const{getSubmitProps:r}=C();return{asChild:!0,...r(s)}});export{Be as E,Te as a,Ie as b,Ve as c,Ke as d,_e as e,Ae as f,Oe as g,C as u};
