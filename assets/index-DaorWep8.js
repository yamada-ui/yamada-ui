import{aq as f,r as m,a2 as h,ao as p,N as q,ar as A,as as w,at as d}from"./iframe-Cn-KGvUL.js";import{u as l}from"./index-0VZIcMOX.js";const E=(e,{focusTarget:a,preventScroll:o,shouldFocus:c,visible:t}={preventScroll:!0,shouldFocus:!1})=>{const s=f(e)?e.current:e,u=c&&t,n=m.useRef(u),r=m.useRef(t);h(()=>{!r.current&&t&&(n.current=u),r.current=t},[t,u]);const i=m.useCallback(()=>{if(!t||!s||!n.current||(n.current=!1,s.contains(document.activeElement)))return;const F=f(a)?a.current:a;if(F)requestAnimationFrame(()=>{F.focus({preventScroll:o})});else{const g=p(s);g.length>0?requestAnimationFrame(()=>{g[0]?.focus({preventScroll:o})}):requestAnimationFrame(()=>{s.focus({preventScroll:o})})}},[t,s,a,o]);q(()=>{requestAnimationFrame(()=>{i()})},[i]),l(s,"transitionend",i)},S=({ref:e,elements:a,enabled:o})=>{l(()=>d(e.current),"pointerdown",c=>{if(!A()||!o)return;const t=c.target,u=(a??[e]).some(n=>{const r=f(n)?n.current:n;return r?.contains(t)||r===t});w(d(e.current))!==t&&u&&(c.preventDefault(),t.focus())})};export{E as a,S as u};
