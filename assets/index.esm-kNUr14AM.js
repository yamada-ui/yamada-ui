import{aH as v}from"./iframe-Bh9OJiMa.js";var he=e=>e.type==="checkbox",ne=e=>e instanceof Date,$=e=>e==null;const at=e=>typeof e=="object";var L=e=>!$(e)&&!Array.isArray(e)&&at(e)&&!ne(e),nt=e=>L(e)&&e.target?he(e.target)?e.target.checked:e.target.value:e,Dt=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,lt=(e,s)=>e.has(Dt(s)),Ct=e=>{const s=e.constructor&&e.constructor.prototype;return L(s)&&s.hasOwnProperty("isPrototypeOf")},Oe=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function R(e){if(e instanceof Date)return new Date(e);const s=typeof FileList<"u"&&e instanceof FileList;if(Oe&&(e instanceof Blob||s))return e;const t=Array.isArray(e);if(!t&&!(L(e)&&Ct(e)))return e;const i=t?[]:Object.create(Object.getPrototypeOf(e));for(const u in e)Object.prototype.hasOwnProperty.call(e,u)&&(i[u]=R(e[u]));return i}var me=e=>/^\w*$/.test(e),S=e=>e===void 0,Re=e=>Array.isArray(e)?e.filter(Boolean):[],Te=e=>Re(e.replace(/["|']|\]/g,"").split(/\.|\[/)),y=(e,s,t)=>{if(!s||!L(e))return t;const i=(me(s)?[s]:Te(s)).reduce((u,n)=>$(u)?u:u[n],e);return S(i)||i===e?S(e[s])?t:e[s]:i},z=e=>typeof e=="boolean",q=e=>typeof e=="function",E=(e,s,t)=>{let i=-1;const u=me(s)?[s]:Te(s),n=u.length,d=n-1;for(;++i<n;){const c=u[i];let C=t;if(i!==d){const O=e[c];C=L(O)||Array.isArray(O)?O:isNaN(+u[i+1])?{}:[]}if(c==="__proto__"||c==="constructor"||c==="prototype")return;e[c]=C,e=e[c]}};const _e={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},X={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},se={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},ut=v.createContext(null);ut.displayName="HookFormControlContext";const Le=()=>v.useContext(ut);var ot=(e,s,t,i=!0)=>{const u={defaultValues:s._defaultValues};for(const n in e)Object.defineProperty(u,n,{get:()=>{const d=n;return s._proxyFormState[d]!==X.all&&(s._proxyFormState[d]=!i||X.all),t&&(t[d]=!0),e[d]}});return u};const Me=typeof window<"u"?v.useLayoutEffect:v.useEffect;function Et(e){const s=Le(),{control:t=s,disabled:i,name:u,exact:n}=e||{},[d,c]=v.useState(t._formState),C=v.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return Me(()=>t._subscribe({name:u,formState:C.current,exact:n,callback:O=>{!i&&c({...t._formState,...O})}}),[u,i,n]),v.useEffect(()=>{C.current.isValid&&t._setValid(!0)},[t]),v.useMemo(()=>ot(d,t,C.current,!1),[d,t])}var G=e=>typeof e=="string",Ce=(e,s,t,i,u)=>G(e)?(i&&s.watch.add(e),y(t,e,u)):Array.isArray(e)?e.map(n=>(i&&s.watch.add(n),y(t,n))):(i&&(s.watchAll=!0),t),Ee=e=>$(e)||!at(e);function Z(e,s,t=new WeakSet){if(Ee(e)||Ee(s))return Object.is(e,s);if(ne(e)&&ne(s))return Object.is(e.getTime(),s.getTime());const i=Object.keys(e),u=Object.keys(s);if(i.length!==u.length)return!1;if(t.has(e)||t.has(s))return!0;t.add(e),t.add(s);for(const n of i){const d=e[n];if(!u.includes(n))return!1;if(n!=="ref"){const c=s[n];if(ne(d)&&ne(c)||L(d)&&L(c)||Array.isArray(d)&&Array.isArray(c)?!Z(d,c,t):!Object.is(d,c))return!1}}return!0}function St(e){const s=Le(),{control:t=s,name:i,defaultValue:u,disabled:n,exact:d,compute:c}=e||{},C=v.useRef(u),O=v.useRef(c),Y=v.useRef(void 0),_=v.useRef(t),w=v.useRef(i);O.current=c;const[b,P]=v.useState(()=>{const m=t._getWatch(i,C.current);return O.current?O.current(m):m}),M=v.useCallback(m=>{const x=Ce(i,t._names,m||t._formValues,!1,C.current);return O.current?O.current(x):x},[t._formValues,t._names,i]),I=v.useCallback(m=>{if(!n){const x=Ce(i,t._names,m||t._formValues,!1,C.current);if(O.current){const j=O.current(x);Z(j,Y.current)||(P(j),Y.current=j)}else P(x)}},[t._formValues,t._names,n,i]);Me(()=>((_.current!==t||!Z(w.current,i))&&(_.current=t,w.current=i,I()),t._subscribe({name:i,formState:{values:!0},exact:d,callback:m=>{I(m.values)}})),[t,d,i,I]),v.useEffect(()=>t._removeUnmounted());const U=_.current!==t,V=w.current,p=v.useMemo(()=>{if(n)return null;const m=!U&&!Z(V,i);return U||m?M():null},[n,U,i,V,M]);return p!==null?p:b}function Ot(e){const s=Le(),{name:t,disabled:i,control:u=s,shouldUnregister:n,defaultValue:d,exact:c=!0}=e,C=lt(u._names.array,t),O=v.useMemo(()=>y(u._formValues,t,y(u._defaultValues,t,d)),[u,t,d]),Y=St({control:u,name:t,defaultValue:O,exact:c}),_=Et({control:u,name:t,exact:c}),w=v.useRef(e),b=v.useRef(void 0),P=v.useRef(u.register(t,{...e.rules,value:Y,...z(e.disabled)?{disabled:e.disabled}:{}}));w.current=e;const M=v.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!y(_.errors,t)},isDirty:{enumerable:!0,get:()=>!!y(_.dirtyFields,t)},isTouched:{enumerable:!0,get:()=>!!y(_.touchedFields,t)},isValidating:{enumerable:!0,get:()=>!!y(_.validatingFields,t)},error:{enumerable:!0,get:()=>y(_.errors,t)}}),[_,t]),I=v.useCallback(m=>P.current.onChange({target:{value:nt(m),name:t},type:_e.CHANGE}),[t]),U=v.useCallback(()=>P.current.onBlur({target:{value:y(u._formValues,t),name:t},type:_e.BLUR}),[t,u._formValues]),V=v.useCallback(m=>{const x=y(u._fields,t);x&&x._f&&m&&(x._f.ref={focus:()=>q(m.focus)&&m.focus(),select:()=>q(m.select)&&m.select(),setCustomValidity:j=>q(m.setCustomValidity)&&m.setCustomValidity(j),reportValidity:()=>q(m.reportValidity)&&m.reportValidity()})},[u._fields,t]),p=v.useMemo(()=>({name:t,value:Y,...z(i)||_.disabled?{disabled:_.disabled||i}:{},onChange:I,onBlur:U,ref:V}),[t,i,_.disabled,I,U,V,Y]);return v.useEffect(()=>{const m=u._options.shouldUnregister||n,x=b.current;x&&x!==t&&!C&&u.unregister(x),u.register(t,{...w.current.rules,...z(w.current.disabled)?{disabled:w.current.disabled}:{}});const j=(te,re)=>{const ee=y(u._fields,te);ee&&ee._f&&(ee._f.mount=re)};if(j(t,!0),m){const te=R(y(u._options.defaultValues,t,w.current.defaultValue));E(u._defaultValues,t,te),S(y(u._formValues,t))&&E(u._formValues,t,te)}return!C&&u.register(t),b.current=t,()=>{(C?m&&!u._state.action:m)?u.unregister(t):j(t,!1)}},[t,u,C,n]),v.useEffect(()=>{u._setDisabledField({disabled:i,name:t})},[i,t,u]),v.useMemo(()=>({field:p,formState:_,fieldState:M}),[p,_,M])}const Yt=e=>e.render(Ot(e)),Rt=v.createContext(null);Rt.displayName="HookFormContext";var Tt=(e,s,t,i,u)=>s?{...t[e],types:{...t[e]&&t[e].types?t[e].types:{},[i]:u||!0}}:{},ye=e=>Array.isArray(e)?e:[e],Ge=()=>{let e=[];return{get observers(){return e},next:u=>{for(const n of e)n.next&&n.next(u)},subscribe:u=>(e.push(u),{unsubscribe:()=>{e=e.filter(n=>n!==u)}}),unsubscribe:()=>{e=[]}}};function dt(e,s){const t={};for(const i in e)if(e.hasOwnProperty(i)){const u=e[i],n=s[i];if(u&&L(u)&&n){const d=dt(u,n);L(d)&&(t[i]=d)}else e[i]&&(t[i]=n)}return t}var W=e=>L(e)&&!Object.keys(e).length,Ue=e=>e.type==="file",be=e=>{if(!Oe)return!1;const s=e?e.ownerDocument:0;return e instanceof(s&&s.defaultView?s.defaultView.HTMLElement:HTMLElement)},ft=e=>e.type==="select-multiple",Ne=e=>e.type==="radio",Lt=e=>Ne(e)||he(e),De=e=>be(e)&&e.isConnected;function Mt(e,s){const t=s.slice(0,-1).length;let i=0;for(;i<t;)e=S(e)?i++:e[s[i++]];return e}function Ut(e){for(const s in e)if(e.hasOwnProperty(s)&&!S(e[s]))return!1;return!0}function T(e,s){const t=Array.isArray(s)?s:me(s)?[s]:Te(s),i=t.length===1?e:Mt(e,t),u=t.length-1,n=t[u];return i&&delete i[n],u!==0&&(L(i)&&W(i)||Array.isArray(i)&&Ut(i))&&T(e,t.slice(0,-1)),e}var Nt=e=>{for(const s in e)if(q(e[s]))return!0;return!1};function ct(e){return Array.isArray(e)||L(e)&&!Nt(e)}function Se(e,s={}){for(const t in e){const i=e[t];ct(i)?(s[t]=Array.isArray(i)?[]:{},Se(i,s[t])):S(i)||(s[t]=!0)}return s}function ue(e,s,t){t||(t=Se(s));for(const i in e){const u=e[i];if(ct(u))S(s)||Ee(t[i])?t[i]=Se(u,Array.isArray(u)?[]:{}):ue(u,$(s)?{}:s[i],t[i]);else{const n=s[i];t[i]=!Z(u,n)}}return t}const Ye={value:!1,isValid:!1},Je={value:!0,isValid:!0};var yt=e=>{if(Array.isArray(e)){if(e.length>1){const s=e.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:s,isValid:!!s.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!S(e[0].attributes.value)?S(e[0].value)||e[0].value===""?Je:{value:e[0].value,isValid:!0}:Je:Ye}return Ye},gt=(e,{valueAsNumber:s,valueAsDate:t,setValueAs:i})=>S(e)?e:s?e===""?NaN:e&&+e:t&&G(e)?new Date(e):i?i(e):e;const Qe={isValid:!1,value:null};var ht=e=>Array.isArray(e)?e.reduce((s,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:s,Qe):Qe;function Xe(e){const s=e.ref;return Ue(s)?s.files:Ne(s)?ht(e.refs).value:ft(s)?[...s.selectedOptions].map(({value:t})=>t):he(s)?yt(e.refs).value:gt(S(s.value)?e.ref.value:s.value,e)}var It=(e,s,t,i)=>{const u={};for(const n of e){const d=y(s,n);d&&E(u,n,d._f)}return{criteriaMode:t,names:[...e],fields:u,shouldUseNativeValidation:i}},Ve=e=>e instanceof RegExp,ce=e=>S(e)?e:Ve(e)?e.source:L(e)?Ve(e.value)?e.value.source:e.value:e,Ze=e=>({isOnSubmit:!e||e===X.onSubmit,isOnBlur:e===X.onBlur,isOnChange:e===X.onChange,isOnAll:e===X.all,isOnTouch:e===X.onTouched});const et="AsyncFunction";var Bt=e=>!!e&&!!e.validate&&!!(q(e.validate)&&e.validate.constructor.name===et||L(e.validate)&&Object.values(e.validate).find(s=>s.constructor.name===et)),Pt=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),tt=(e,s,t)=>!t&&(s.watchAll||s.watch.has(e)||[...s.watch].some(i=>e.startsWith(i)&&/^\.\w+/.test(e.slice(i.length))));const ge=(e,s,t,i)=>{for(const u of t||Object.keys(e)){const n=y(e,u);if(n){const{_f:d,...c}=n;if(d){if(d.refs&&d.refs[0]&&s(d.refs[0],u)&&!i)return!0;if(d.ref&&s(d.ref,d.name)&&!i)return!0;if(ge(c,s))break}else if(L(c)&&ge(c,s))break}}};function rt(e,s,t){const i=y(e,t);if(i||me(t))return{error:i,name:t};const u=t.split(".");for(;u.length;){const n=u.join("."),d=y(s,n),c=y(e,n);if(d&&!Array.isArray(d)&&t!==n)return{name:t};if(c&&c.type)return{name:n,error:c};if(c&&c.root&&c.root.type)return{name:`${n}.root`,error:c.root};u.pop()}return{name:t}}var pt=(e,s,t,i)=>{t(e);const{name:u,...n}=e;return W(n)||Object.keys(n).length>=Object.keys(s).length||Object.keys(n).find(d=>s[d]===(!i||X.all))},Ht=(e,s,t)=>!e||!s||e===s||ye(e).some(i=>i&&(t?i===s:i.startsWith(s)||s.startsWith(i))),Wt=(e,s,t,i,u)=>u.isOnAll?!1:!t&&u.isOnTouch?!(s||e):(t?i.isOnBlur:u.isOnBlur)?!e:(t?i.isOnChange:u.isOnChange)?e:!0,qt=(e,s)=>!Re(y(e,s)).length&&T(e,s),jt=(e,s,t)=>{const i=ye(y(e,t));return E(i,"root",s[t]),E(e,t,i),e};function st(e,s,t="validate"){if(G(e)||Array.isArray(e)&&e.every(G)||z(e)&&!e)return{type:t,message:G(e)?e:"",ref:s}}var le=e=>L(e)&&!Ve(e)?e:{value:e,message:""},it=async(e,s,t,i,u,n)=>{const{ref:d,refs:c,required:C,maxLength:O,minLength:Y,min:_,max:w,pattern:b,validate:P,name:M,valueAsNumber:I,mount:U}=e._f,V=y(t,M);if(!U||s.has(M))return{};const p=c?c[0]:d,m=F=>{u&&p.reportValidity&&(p.setCustomValidity(z(F)?"":F||""),p.reportValidity())},x={},j=Ne(d),te=he(d),re=j||te,ee=(I||Ue(d))&&S(d.value)&&S(V)||be(d)&&d.value===""||V===""||Array.isArray(V)&&!V.length,J=Tt.bind(null,M,i,x),ve=(F,A,N,B=se.maxLength,Q=se.minLength)=>{const K=F?A:N;x[M]={type:F?B:Q,message:K,ref:d,...J(F?B:Q,K)}};if(n?!Array.isArray(V)||!V.length:C&&(!re&&(ee||$(V))||z(V)&&!V||te&&!yt(c).isValid||j&&!ht(c).isValid)){const{value:F,message:A}=G(C)?{value:!!C,message:C}:le(C);if(F&&(x[M]={type:se.required,message:A,ref:p,...J(se.required,A)},!i))return m(A),x}if(!ee&&(!$(_)||!$(w))){let F,A;const N=le(w),B=le(_);if(!$(V)&&!isNaN(V)){const Q=d.valueAsNumber||V&&+V;$(N.value)||(F=Q>N.value),$(B.value)||(A=Q<B.value)}else{const Q=d.valueAsDate||new Date(V),K=fe=>new Date(new Date().toDateString()+" "+fe),oe=d.type=="time",de=d.type=="week";G(N.value)&&V&&(F=oe?K(V)>K(N.value):de?V>N.value:Q>new Date(N.value)),G(B.value)&&V&&(A=oe?K(V)<K(B.value):de?V<B.value:Q<new Date(B.value))}if((F||A)&&(ve(!!F,N.message,B.message,se.max,se.min),!i))return m(x[M].message),x}if((O||Y)&&!ee&&(G(V)||n&&Array.isArray(V))){const F=le(O),A=le(Y),N=!$(F.value)&&V.length>+F.value,B=!$(A.value)&&V.length<+A.value;if((N||B)&&(ve(N,F.message,A.message),!i))return m(x[M].message),x}if(b&&!ee&&G(V)){const{value:F,message:A}=le(b);if(Ve(F)&&!V.match(F)&&(x[M]={type:se.pattern,message:A,ref:d,...J(se.pattern,A)},!i))return m(A),x}if(P){if(q(P)){const F=await P(V,t),A=st(F,p);if(A&&(x[M]={...A,...J(se.validate,A.message)},!i))return m(A.message),x}else if(L(P)){let F={};for(const A in P){if(!W(F)&&!i)break;const N=st(await P[A](V,t),p,A);N&&(F={...N,...J(A,N.message)},m(N.message),i&&(x[M]=F))}if(!W(F)&&(x[M]={ref:p,...F},!i))return x}}return m(!0),x};const $t={mode:X.onSubmit,reValidateMode:X.onChange,shouldFocusError:!0};function Kt(e={}){let s={...$t,...e},t={submitCount:0,isDirty:!1,isReady:!1,isLoading:q(s.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:s.errors||{},disabled:s.disabled||!1},i={},u=L(s.defaultValues)||L(s.values)?R(s.defaultValues||s.values)||{}:{},n=s.shouldUnregister?{}:R(u),d={action:!1,mount:!1,watch:!1,keepIsValid:!1},c={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},C,O=0;const Y={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},_={...Y};let w={..._};const b={array:Ge(),state:Ge()},P=s.criteriaMode===X.all,M=r=>a=>{clearTimeout(O),O=setTimeout(r,a)},I=async r=>{if(!d.keepIsValid&&!s.disabled&&(_.isValid||w.isValid||r)){let a;s.resolver?(a=W((await re()).errors),U()):a=await J(i,!0),a!==t.isValid&&b.state.next({isValid:a})}},U=(r,a)=>{!s.disabled&&(_.isValidating||_.validatingFields||w.isValidating||w.validatingFields)&&((r||Array.from(c.mount)).forEach(l=>{l&&(a?E(t.validatingFields,l,a):T(t.validatingFields,l))}),b.state.next({validatingFields:t.validatingFields,isValidating:!W(t.validatingFields)}))},V=(r,a=[],l,g,f=!0,o=!0)=>{if(g&&l&&!s.disabled){if(d.action=!0,o&&Array.isArray(y(i,r))){const h=l(y(i,r),g.argA,g.argB);f&&E(i,r,h)}if(o&&Array.isArray(y(t.errors,r))){const h=l(y(t.errors,r),g.argA,g.argB);f&&E(t.errors,r,h),qt(t.errors,r)}if((_.touchedFields||w.touchedFields)&&o&&Array.isArray(y(t.touchedFields,r))){const h=l(y(t.touchedFields,r),g.argA,g.argB);f&&E(t.touchedFields,r,h)}(_.dirtyFields||w.dirtyFields)&&(t.dirtyFields=ue(u,n)),b.state.next({name:r,isDirty:F(r,a),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else E(n,r,a)},p=(r,a)=>{E(t.errors,r,a),b.state.next({errors:t.errors})},m=r=>{t.errors=r,b.state.next({errors:t.errors,isValid:!1})},x=(r,a,l,g)=>{const f=y(i,r);if(f){const o=y(n,r,S(l)?y(u,r):l);S(o)||g&&g.defaultChecked||a?E(n,r,a?o:Xe(f._f)):B(r,o),d.mount&&!d.action&&I()}},j=(r,a,l,g,f)=>{let o=!1,h=!1;const k={name:r};if(!s.disabled){if(!l||g){(_.isDirty||w.isDirty)&&(h=t.isDirty,t.isDirty=k.isDirty=F(),o=h!==k.isDirty);const D=Z(y(u,r),a);h=!!y(t.dirtyFields,r),D?T(t.dirtyFields,r):E(t.dirtyFields,r,!0),k.dirtyFields=t.dirtyFields,o=o||(_.dirtyFields||w.dirtyFields)&&h!==!D}if(l){const D=y(t.touchedFields,r);D||(E(t.touchedFields,r,l),k.touchedFields=t.touchedFields,o=o||(_.touchedFields||w.touchedFields)&&D!==l)}o&&f&&b.state.next(k)}return o?k:{}},te=(r,a,l,g)=>{const f=y(t.errors,r),o=(_.isValid||w.isValid)&&z(a)&&t.isValid!==a;if(s.delayError&&l?(C=M(()=>p(r,l)),C(s.delayError)):(clearTimeout(O),C=null,l?E(t.errors,r,l):T(t.errors,r)),(l?!Z(f,l):f)||!W(g)||o){const h={...g,...o&&z(a)?{isValid:a}:{},errors:t.errors,name:r};t={...t,...h},b.state.next(h)}},re=async r=>(U(r,!0),await s.resolver(n,s.context,It(r||c.mount,i,s.criteriaMode,s.shouldUseNativeValidation))),ee=async r=>{const{errors:a}=await re(r);if(U(r),r)for(const l of r){const g=y(a,l);g?E(t.errors,l,g):T(t.errors,l)}else t.errors=a;return a},J=async(r,a,l={valid:!0})=>{for(const g in r){const f=r[g];if(f){const{_f:o,...h}=f;if(o){const k=c.array.has(o.name),D=f._f&&Bt(f._f);D&&_.validatingFields&&U([o.name],!0);const H=await it(f,c.disabled,n,P,s.shouldUseNativeValidation&&!a,k);if(D&&_.validatingFields&&U([o.name]),H[o.name]&&(l.valid=!1,a||e.shouldUseNativeValidation))break;!a&&(y(H,o.name)?k?jt(t.errors,H,o.name):E(t.errors,o.name,H[o.name]):T(t.errors,o.name))}!W(h)&&await J(h,a,l)}}return l.valid},ve=()=>{for(const r of c.unMount){const a=y(i,r);a&&(a._f.refs?a._f.refs.every(l=>!De(l)):!De(a._f.ref))&&Fe(r)}c.unMount=new Set},F=(r,a)=>!s.disabled&&(r&&a&&E(n,r,a),!Z(Ie(),u)),A=(r,a,l)=>Ce(r,c,{...d.mount?n:S(a)?u:G(r)?{[r]:a}:a},l,a),N=r=>Re(y(d.mount?n:u,r,s.shouldUnregister?y(u,r,[]):[])),B=(r,a,l={})=>{const g=y(i,r);let f=a;if(g){const o=g._f;o&&(!o.disabled&&E(n,r,gt(a,o)),f=be(o.ref)&&$(a)?"":a,ft(o.ref)?[...o.ref.options].forEach(h=>h.selected=f.includes(h.value)):o.refs?he(o.ref)?o.refs.forEach(h=>{(!h.defaultChecked||!h.disabled)&&(Array.isArray(f)?h.checked=!!f.find(k=>k===h.value):h.checked=f===h.value||!!f)}):o.refs.forEach(h=>h.checked=h.value===f):Ue(o.ref)?o.ref.value="":(o.ref.value=f,o.ref.type||b.state.next({name:r,values:R(n)})))}(l.shouldDirty||l.shouldTouch)&&j(r,f,l.shouldTouch,l.shouldDirty,!0),l.shouldValidate&&fe(r)},Q=(r,a,l)=>{for(const g in a){if(!a.hasOwnProperty(g))return;const f=a[g],o=r+"."+g,h=y(i,o);(c.array.has(r)||L(f)||h&&!h._f)&&!ne(f)?Q(o,f,l):B(o,f,l)}},K=(r,a,l={})=>{const g=y(i,r),f=c.array.has(r),o=R(a);E(n,r,o),f?(b.array.next({name:r,values:R(n)}),(_.isDirty||_.dirtyFields||w.isDirty||w.dirtyFields)&&l.shouldDirty&&b.state.next({name:r,dirtyFields:ue(u,n),isDirty:F(r,o)})):g&&!g._f&&!$(o)?Q(r,o,l):B(r,o,l),tt(r,c)?b.state.next({...t,name:r,values:R(n)}):b.state.next({name:d.mount?r:void 0,values:R(n)})},oe=async r=>{d.mount=!0;const a=r.target;let l=a.name,g=!0;const f=y(i,l),o=D=>{g=Number.isNaN(D)||ne(D)&&isNaN(D.getTime())||Z(D,y(n,l,D))},h=Ze(s.mode),k=Ze(s.reValidateMode);if(f){let D,H;const ae=a.type?Xe(f._f):nt(r),ie=r.type===_e.BLUR||r.type===_e.FOCUS_OUT,At=!Pt(f._f)&&!s.resolver&&!y(t.errors,l)&&!f._f.deps||Wt(ie,y(t.touchedFields,l),t.isSubmitted,k,h),we=tt(l,c,ie);E(n,l,ae),ie?(!a||!a.readOnly)&&(f._f.onBlur&&f._f.onBlur(r),C&&C(0)):f._f.onChange&&f._f.onChange(r);const ke=j(l,ae,ie),wt=!W(ke)||we;if(!ie&&b.state.next({name:l,type:r.type,values:R(n)}),At)return(_.isValid||w.isValid)&&(s.mode==="onBlur"?ie&&I():ie||I()),wt&&b.state.next({name:l,...we?{}:ke});if(!ie&&we&&b.state.next({...t}),s.resolver){const{errors:Ke}=await re([l]);if(U([l]),o(ae),g){const kt=rt(t.errors,i,l),ze=rt(Ke,i,kt.name||l);D=ze.error,l=ze.name,H=W(Ke)}}else U([l],!0),D=(await it(f,c.disabled,n,P,s.shouldUseNativeValidation))[l],U([l]),o(ae),g&&(D?H=!1:(_.isValid||w.isValid)&&(H=await J(i,!0)));g&&(f._f.deps&&(!Array.isArray(f._f.deps)||f._f.deps.length>0)&&fe(f._f.deps),te(l,H,D,ke))}},de=(r,a)=>{if(y(t.errors,a)&&r.focus)return r.focus(),1},fe=async(r,a={})=>{let l,g;const f=ye(r);if(s.resolver){const o=await ee(S(r)?r:f);l=W(o),g=r?!f.some(h=>y(o,h)):l}else r?(g=(await Promise.all(f.map(async o=>{const h=y(i,o);return await J(h&&h._f?{[o]:h}:h)}))).every(Boolean),!(!g&&!t.isValid)&&I()):g=l=await J(i);return b.state.next({...!G(r)||(_.isValid||w.isValid)&&l!==t.isValid?{}:{name:r},...s.resolver||!r?{isValid:l}:{},errors:t.errors}),a.shouldFocus&&!g&&ge(i,de,r?f:c.mount),g},Ie=(r,a)=>{let l={...d.mount?n:u};return a&&(l=dt(a.dirtyFields?t.dirtyFields:t.touchedFields,l)),S(r)?l:G(r)?y(l,r):r.map(g=>y(l,g))},Be=(r,a)=>({invalid:!!y((a||t).errors,r),isDirty:!!y((a||t).dirtyFields,r),error:y((a||t).errors,r),isValidating:!!y(t.validatingFields,r),isTouched:!!y((a||t).touchedFields,r)}),vt=r=>{r&&ye(r).forEach(a=>T(t.errors,a)),b.state.next({errors:r?t.errors:{}})},Pe=(r,a,l)=>{const g=(y(i,r,{_f:{}})._f||{}).ref,f=y(t.errors,r)||{},{ref:o,message:h,type:k,...D}=f;E(t.errors,r,{...D,...a,ref:g}),b.state.next({name:r,errors:t.errors,isValid:!1}),l&&l.shouldFocus&&g&&g.focus&&g.focus()},_t=(r,a)=>q(r)?b.state.subscribe({next:l=>"values"in l&&r(A(void 0,a),l)}):A(r,a,!0),pe=r=>b.state.subscribe({next:a=>{Ht(r.name,a.name,r.exact)&&pt(a,r.formState||_,xt,r.reRenderRoot)&&r.callback({values:{...n},...t,...a,defaultValues:u})}}).unsubscribe,bt=r=>(d.mount=!0,w={...w,...r.formState},pe({...r,formState:{...Y,...r.formState}})),Fe=(r,a={})=>{for(const l of r?ye(r):c.mount)c.mount.delete(l),c.array.delete(l),a.keepValue||(T(i,l),T(n,l)),!a.keepError&&T(t.errors,l),!a.keepDirty&&T(t.dirtyFields,l),!a.keepTouched&&T(t.touchedFields,l),!a.keepIsValidating&&T(t.validatingFields,l),!s.shouldUnregister&&!a.keepDefaultValue&&T(u,l);b.state.next({values:R(n)}),b.state.next({...t,...a.keepDirty?{isDirty:F()}:{}}),!a.keepIsValid&&I()},He=({disabled:r,name:a})=>{if(z(r)&&d.mount||r||c.disabled.has(a)){const f=c.disabled.has(a)!==!!r;r?c.disabled.add(a):c.disabled.delete(a),f&&d.mount&&!d.action&&I()}},xe=(r,a={})=>{let l=y(i,r);const g=z(a.disabled)||z(s.disabled);return E(i,r,{...l||{},_f:{...l&&l._f?l._f:{ref:{name:r}},name:r,mount:!0,...a}}),c.mount.add(r),l?He({disabled:z(a.disabled)?a.disabled:s.disabled,name:r}):x(r,!0,a.value),{...g?{disabled:a.disabled||s.disabled}:{},...s.progressive?{required:!!a.required,min:ce(a.min),max:ce(a.max),minLength:ce(a.minLength),maxLength:ce(a.maxLength),pattern:ce(a.pattern)}:{},name:r,onChange:oe,onBlur:oe,ref:f=>{if(f){xe(r,a),l=y(i,r);const o=S(f.value)&&f.querySelectorAll&&f.querySelectorAll("input,select,textarea")[0]||f,h=Lt(o),k=l._f.refs||[];if(h?k.find(D=>D===o):o===l._f.ref)return;E(i,r,{_f:{...l._f,...h?{refs:[...k.filter(De),o,...Array.isArray(y(u,r))?[{}]:[]],ref:{type:o.type,name:r}}:{ref:o}}}),x(r,!1,void 0,o)}else l=y(i,r,{}),l._f&&(l._f.mount=!1),(s.shouldUnregister||a.shouldUnregister)&&!(lt(c.array,r)&&d.action)&&c.unMount.add(r)}}},Ae=()=>s.shouldFocusError&&ge(i,de,c.mount),Vt=r=>{z(r)&&(b.state.next({disabled:r}),ge(i,(a,l)=>{const g=y(i,l);g&&(a.disabled=g._f.disabled||r,Array.isArray(g._f.refs)&&g._f.refs.forEach(f=>{f.disabled=g._f.disabled||r}))},0,!1))},We=(r,a)=>async l=>{let g;l&&(l.preventDefault&&l.preventDefault(),l.persist&&l.persist());let f=R(n);if(b.state.next({isSubmitting:!0}),s.resolver){const{errors:o,values:h}=await re();U(),t.errors=o,f=R(h)}else await J(i);if(c.disabled.size)for(const o of c.disabled)T(f,o);if(T(t.errors,"root"),W(t.errors)){b.state.next({errors:{}});try{await r(f,l)}catch(o){g=o}}else a&&await a({...t.errors},l),Ae(),setTimeout(Ae);if(b.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:W(t.errors)&&!g,submitCount:t.submitCount+1,errors:t.errors}),g)throw g},mt=(r,a={})=>{y(i,r)&&(S(a.defaultValue)?K(r,R(y(u,r))):(K(r,a.defaultValue),E(u,r,R(a.defaultValue))),a.keepTouched||T(t.touchedFields,r),a.keepDirty||(T(t.dirtyFields,r),t.isDirty=a.defaultValue?F(r,R(y(u,r))):F()),a.keepError||(T(t.errors,r),_.isValid&&I()),b.state.next({...t}))},qe=(r,a={})=>{const l=r?R(r):u,g=R(l),f=W(r),o=f?u:g;if(a.keepDefaultValues||(u=l),!a.keepValues){if(a.keepDirtyValues){const h=new Set([...c.mount,...Object.keys(ue(u,n))]);for(const k of Array.from(h)){const D=y(t.dirtyFields,k),H=y(n,k),ae=y(o,k);D&&!S(H)?E(o,k,H):!D&&!S(ae)&&K(k,ae)}}else{if(Oe&&S(r))for(const h of c.mount){const k=y(i,h);if(k&&k._f){const D=Array.isArray(k._f.refs)?k._f.refs[0]:k._f.ref;if(be(D)){const H=D.closest("form");if(H){H.reset();break}}}}if(a.keepFieldsRef)for(const h of c.mount)K(h,y(o,h));else i={}}n=s.shouldUnregister?a.keepDefaultValues?R(u):{}:R(o),b.array.next({values:{...o}}),b.state.next({values:{...o}})}c={mount:a.keepDirtyValues?c.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},d.mount=!_.isValid||!!a.keepIsValid||!!a.keepDirtyValues||!s.shouldUnregister&&!W(o),d.watch=!!s.shouldUnregister,d.keepIsValid=!!a.keepIsValid,d.action=!1,a.keepErrors||(t.errors={}),b.state.next({submitCount:a.keepSubmitCount?t.submitCount:0,isDirty:f?!1:a.keepDirty?t.isDirty:!!(a.keepDefaultValues&&!Z(r,u)),isSubmitted:a.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:f?{}:a.keepDirtyValues?a.keepDefaultValues&&n?ue(u,n):t.dirtyFields:a.keepDefaultValues&&r?ue(u,r):a.keepDirty?t.dirtyFields:{},touchedFields:a.keepTouched?t.touchedFields:{},errors:a.keepErrors?t.errors:{},isSubmitSuccessful:a.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:u})},je=(r,a)=>qe(q(r)?r(n):r,{...s.resetOptions,...a}),Ft=(r,a={})=>{const l=y(i,r),g=l&&l._f;if(g){const f=g.refs?g.refs[0]:g.ref;f.focus&&setTimeout(()=>{f.focus(),a.shouldSelect&&q(f.select)&&f.select()})}},xt=r=>{t={...t,...r}},$e={control:{register:xe,unregister:Fe,getFieldState:Be,handleSubmit:We,setError:Pe,_subscribe:pe,_runSchema:re,_updateIsValidating:U,_focusError:Ae,_getWatch:A,_getDirty:F,_setValid:I,_setFieldArray:V,_setDisabledField:He,_setErrors:m,_getFieldArray:N,_reset:qe,_resetDefaultValues:()=>q(s.defaultValues)&&s.defaultValues().then(r=>{je(r,s.resetOptions),b.state.next({isLoading:!1})}),_removeUnmounted:ve,_disableForm:Vt,_subjects:b,_proxyFormState:_,get _fields(){return i},get _formValues(){return n},get _state(){return d},set _state(r){d=r},get _defaultValues(){return u},get _names(){return c},set _names(r){c=r},get _formState(){return t},get _options(){return s},set _options(r){s={...s,...r}}},subscribe:bt,trigger:fe,register:xe,handleSubmit:We,watch:_t,setValue:K,getValues:Ie,reset:je,resetField:mt,clearErrors:vt,unregister:Fe,setError:Pe,setFocus:Ft,getFieldState:Be};return{...$e,formControl:$e}}function Jt(e={}){const s=v.useRef(void 0),t=v.useRef(void 0),[i,u]=v.useState({isDirty:!1,isValidating:!1,isLoading:q(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:q(e.defaultValues)?void 0:e.defaultValues});if(!s.current)if(e.formControl)s.current={...e.formControl,formState:i},e.defaultValues&&!q(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:d,...c}=Kt(e);s.current={...c,formState:i}}const n=s.current.control;return n._options=e,Me(()=>{const d=n._subscribe({formState:n._proxyFormState,callback:()=>u({...n._formState}),reRenderRoot:!0});return u(c=>({...c,isReady:!0})),n._formState.isReady=!0,d},[n]),v.useEffect(()=>n._disableForm(e.disabled),[n,e.disabled]),v.useEffect(()=>{e.mode&&(n._options.mode=e.mode),e.reValidateMode&&(n._options.reValidateMode=e.reValidateMode)},[n,e.mode,e.reValidateMode]),v.useEffect(()=>{e.errors&&(n._setErrors(e.errors),n._focusError())},[n,e.errors]),v.useEffect(()=>{e.shouldUnregister&&n._subjects.state.next({values:n._getWatch()})},[n,e.shouldUnregister]),v.useEffect(()=>{if(n._proxyFormState.isDirty){const d=n._getDirty();d!==i.isDirty&&n._subjects.state.next({isDirty:d})}},[n,i.isDirty]),v.useEffect(()=>{var d;e.values&&!Z(e.values,t.current)?(n._reset(e.values,{keepFieldsRef:!0,...n._options.resetOptions}),!((d=n._options.resetOptions)===null||d===void 0)&&d.keepIsValid||n._setValid(),t.current=e.values,u(c=>({...c}))):n._resetDefaultValues()},[n,e.values]),v.useEffect(()=>{n._state.mount||(n._setValid(),n._state.mount=!0),n._state.watch&&(n._state.watch=!1,n._subjects.state.next({...n._formState})),n._removeUnmounted()}),s.current.formState=v.useMemo(()=>ot(i,n),[n,i]),s.current}export{Yt as C,Jt as u};
