import{ax as f,r as m,a7 as A,ay as h,P as p,az as q,aA as y,an as l}from"./iframe-BHpF9Anv.js";import{u as d}from"./index-9k2c-L2q.js";const x=(e,{focusTarget:a,preventScroll:u,shouldFocus:c,visible:t}={preventScroll:!0,shouldFocus:!1})=>{const s=f(e)?e.current:e,o=c&&t,n=m.useRef(o),r=m.useRef(t);A(()=>{!r.current&&t&&(n.current=o),r.current=t},[t,o]);const i=m.useCallback(()=>{if(!s||!n.current||(n.current=!1,s.contains(document.activeElement)))return;const F=f(a)?a.current:a;if(F)requestAnimationFrame(()=>{F.focus({preventScroll:u})});else{const g=h(s);g.length>0?requestAnimationFrame(()=>{g[0]?.focus({preventScroll:u})}):requestAnimationFrame(()=>{s.focus({preventScroll:u})})}},[s,a,u]);p(()=>{requestAnimationFrame(()=>{i()})},[i]),d(s,"transitionend",i)},D=({ref:e,elements:a,enabled:u})=>{d(()=>l(e.current),"pointerdown",c=>{if(!q()||!u)return;const t=c.target,o=(a??[e]).some(n=>{const r=f(n)?n.current:n;return r?.contains(t)||r===t});y(l(e.current))!==t&&o&&(c.preventDefault(),t.focus())})};export{D as a,x as u};
