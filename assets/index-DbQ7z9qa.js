import{c as _,r as E,a2 as g,X as T,m as P,a3 as S}from"./iframe-Cn-KGvUL.js";const V=t=>t.sort((c,u)=>{const s=c.compareDocumentPosition(u);return s&Node.DOCUMENT_POSITION_FOLLOWING||s&Node.DOCUMENT_POSITION_CONTAINED_BY?-1:s&Node.DOCUMENT_POSITION_PRECEDING||s&Node.DOCUMENT_POSITION_CONTAINS?1:((s&Node.DOCUMENT_POSITION_DISCONNECTED||s&Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC)&&console.warn("Cannot sort the given nodes."),0)}),m=(t,c,u)=>{let s=t+1;return u&&s>=c&&(s=0),s},v=(t,c,u)=>{let s=t-1;return u&&s<0&&(s=c),s},M=()=>{const t=new Map,c=e=>{t.forEach(n=>{const r=e.indexOf(n.node);n.index=r,n.node.dataset.index=n.index.toString()})},u=(e,n)=>{if(!e||t.has(e))return;const r=Array.from(t.keys()).concat(e),a=V(r);n?.disabled&&(n.disabled=!!n.disabled);const C={index:-1,node:e,...n};t.set(e,C),c(a)},s=e=>{if(e!=null)return S(e)?u(e):n=>u(n,e)},d=e=>{if(e==null)return;t.delete(e);const n=V(Array.from(t.keys()));c(n)},i=()=>t.clear(),x=e=>l(e).length,I=e=>b(e).length,o=e=>e?t.get(e)?.index??-1:-1,f=(e,n)=>e==null?-1:b(n).findIndex(r=>r.node.isSameNode(e)),l=e=>{const n=Array.from(t.values());return e?n.filter(e).sort((r,a)=>r.index-a.index):n.sort((r,a)=>r.index-a.index)},b=e=>l(e).filter(({disabled:n})=>!n),N=(e,n)=>{if(x(n)!==0)return l(n)[e]},O=(e,n)=>{if(I(n)!==0)return b(n)[e]};return{count:x,destroy:i,enabledCount:I,enabledFirstValue:e=>O(0,e),enabledIndexOf:f,enabledLastValue:e=>O(b(e).length-1,e),enabledNextValue:(e,n,r=!0)=>{const a=N(e);if(!a)return;const C=f(a.node,n),D=m(C,I(n),r);return O(D,n)},enabledPrevValue:(e,n,r=!0)=>{const a=N(e);if(!a)return;const C=f(a.node,n),D=v(C,I(n)-1,r);return O(D,n)},enabledValue:O,enabledValues:b,firstValue:e=>N(0,e),indexOf:o,lastValue:e=>N(t.size-1,e),nextValue:(e,n,r=!0)=>{const a=m(e,x(n),r);return N(a,n)},prevValue:(e,n,r=!0)=>{const a=v(e,x(n)-1,r);return N(a,n)},register:s,unregister:d,value:N,values:l}},w=()=>{const[t,c]=_({name:"DescendantsContext"});return{DescendantsContext:t,useDescendant:d=>{const i=c(),[x,I]=E.useState(-1),o=E.useRef(null);g(()=>()=>{o.current&&i.unregister(o.current)},[]),g(()=>{if(!o.current)return;const l=Number(o.current.dataset.index);x!=l&&!Number.isNaN(l)&&I(l)});const f=d?T(i.register(d)):T(i.register);return{descendants:i,enabledIndex:i.enabledIndexOf(o.current,d?.filter),index:x,register:P(f,o)}},useDescendants:()=>{const d=E.useRef(M());return g(()=>()=>d.current.destroy()),d.current},useDescendantsContext:c}};export{w as c};
