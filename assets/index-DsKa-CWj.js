import{r as m,aC as g,aD as A,O as d,aE as T,aF as q,au as b}from"./iframe-Brv718Ke.js";import{u as p}from"./index-BGBV8ojj.js";const h=(t,{focusTarget:n,preventScroll:u,shouldFocus:c,visible:a}={preventScroll:!0,shouldFocus:!1})=>{const r=c&&a,e=m.useRef(!1),s=m.useCallback(()=>g(t)?t.current:t,[t]),o=m.useCallback(()=>g(n)?n.current:n,[n]),F=m.useCallback(()=>{const i=s();if(!i||!r||e.current||i.contains(document.activeElement))return;const f=o();if(f)requestAnimationFrame(()=>{f.focus({preventScroll:u}),e.current=!0});else{const l=A(i);requestAnimationFrame(l?()=>{l.focus({preventScroll:u}),e.current=!0}:()=>{i.focus({preventScroll:u}),e.current=!0})}},[s,r,o,u]);d(()=>{e.current=!r},[r]),d(()=>{requestAnimationFrame(F)},[F]),p(s,"transitionend",F)},k=({ref:t,elements:n,enabled:u})=>{p(()=>b(t.current),"pointerdown",c=>{if(!T()||!u)return;const a=c.target,e=(n??[t]).some(s=>{const o=g(s)?s.current:s;return o?.contains(a)||o===a});q(b(t.current))!==a&&e&&(c.preventDefault(),a.focus())})};export{k as a,h as u};
