import{r as s,az as R,av as C,A as x,X as y,v as A}from"./iframe-BHZTlJ0V.js";const w=()=>{const b=s.useRef(0),{breakpoints:d,config:g}=R(),{getWindow:c}=C(),{containerRef:i,direction:h="down",identifier:p="@media screen"}=g.breakpoint??{},u=!!i,a=s.useMemo(()=>d.queries.map(({breakpoint:t,maxW:n,minMaxQuery:e,minW:r})=>{const o=p==="@media screen"?"@media screen and ":`${p} `,f=e?.replace(o,"")??"";return{breakpoint:t,maxW:n,minW:r,query:f}}),[d,p]),m=!!a.length,l=s.useCallback(t=>{if(x(t)){const n=c();if(u||!m)return"base";for(const{breakpoint:e,query:r}of a)if(n?.matchMedia(r)?.matches)return e}else for(const{breakpoint:n,maxW:e,minW:r}of a)if(h!=="up"){if((r??0)<=t)return n}else if(t<=(e??1/0))return n;return"base"},[h,c,u,m,a]),k=s.useRef(l()),q=s.useCallback(t=>{if(!u||!m){const n=a.map(({breakpoint:e,query:r})=>{const o=c()?.matchMedia(r),f=E=>{E.matches&&(k.current=e),t()};return o?.addEventListener("change",f),()=>{o?.removeEventListener("change",f)}});return()=>{n.forEach(e=>e())}}else if(y()){const n=new ResizeObserver(([e])=>{if(!e)return;cancelAnimationFrame(b.current);const{width:r}=e.contentRect;k.current=l(r),b.current=requestAnimationFrame(t)});return i.current&&n.observe(i.current),()=>{n.disconnect(),cancelAnimationFrame(b.current)}}else return A},[i,l,c,u,m,a]),v=s.useCallback(()=>k.current,[]);return s.useSyncExternalStore(q,v,v)};export{w as u};
