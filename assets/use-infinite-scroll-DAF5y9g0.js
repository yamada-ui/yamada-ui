import{r as n,ak as X,au as Y,a4 as H,b3 as I}from"./iframe-DlW9lece.js";const F=(c,r)=>{const e=getComputedStyle(c);return["auto","overlay","scroll"].includes(e.overflow)?!0:r?["auto","overlay","scroll"].includes(e.overflowY):["auto","overlay","scroll"].includes(e.overflowX)},R=({behavior:c,position:r,reverse:e,root:f,vertical:v})=>{let b;const t=I(f)&&F(f,v)?f:document.body;v?b={behavior:c,top:r??(e?t.scrollHeight:0)}:b={behavior:c,left:r??(e?t.scrollWidth:0)},t===document.body?window.scrollTo(b):t.scrollTo(b)},j=(c,r)=>{const e=I(c)&&F(c,r)?c:document.body;return r?e.scrollHeight-e.scrollTop:e.scrollWidth-e.scrollLeft},z=({behavior:c,disabled:r=!1,indexRef:e,initialLoad:f=!1,orientation:v="vertical",resetRef:b,reverse:t=!1,rootMargin:T,rootRef:u,startIndex:L=f?0:1,threshold:h,onLoad:P}={})=>{const y=n.useRef(null),p=n.useRef(L),m=n.useRef(!1),w=n.useRef(void 0),x=n.useRef(!1),k=n.useRef(0),[W,C]=n.useState(!1),S=X(P),a=v==="vertical",B=n.useMemo(()=>({root:u?.current,rootMargin:T,threshold:h}),[T,u,h]),M=n.useCallback((l=1,s=!0)=>{if(p.current=l,C(!1),s){const i=u?.current;R({behavior:c,reverse:t,root:i,vertical:a})}r||setTimeout(()=>{const i=w.current,o=y.current;o&&i?.observe(o)})},[r,t,u,a,c]),g=n.useCallback(()=>{const l=w.current,s=y.current;s&&l?.unobserve(s),C(!0)},[]),E=n.useCallback(()=>new IntersectionObserver(async([s])=>{if(!s?.isIntersecting||m.current)return;const i={entry:s,finish:g,index:p.current};m.current=!0;const o=u?.current;if(o&&(o.ariaBusy="true"),t&&(k.current=j(o,a)),await S(i),t){const d=k.current;R({position:d,root:o,vertical:a})}p.current+=1,m.current=!1,o&&(o.ariaBusy="false")},B),[g,S,B,u,t,a]);return n.useEffect(()=>{(async()=>{const s=y.current,i=x.current,o=p.current,d=u?.current;if(f&&!i&&(m.current=!0,d&&(d.ariaBusy="true"),await S({finish:g,index:o}),p.current+=1,m.current=!1,d&&(d.ariaBusy="false")),r)return;w.current=E();const O=w.current;if(t&&!i){const U=u?.current;R({reverse:t,root:U,vertical:a}),x.current=!0}return setTimeout(()=>{s&&O.observe(s)}),()=>{s&&O.unobserve(s)}})()},[E,f,r,t,a,g,S,u]),Y(()=>x.current=!1),H(b,M),H(e,l=>p.current=l),{ref:y,finish:W}};export{z as u};
