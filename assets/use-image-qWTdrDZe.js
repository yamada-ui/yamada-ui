import{r as a}from"./index-BwPxMuoB.js";import{u as h}from"./factory-B_KMcXyW.js";const x=(e,u)=>e!=="loaded"&&u==="beforeLoadOrError"||e==="failed"&&u==="onError",R=({src:e,srcSet:u,crossOrigin:l,ignoreFallback:i,loading:d,sizes:o,onError:n,onLoad:r})=>{const[c,m]=a.useState("pending");a.useEffect(()=>{m(e?"loading":"pending")},[e]);const f=a.useRef(),g=a.useCallback(()=>{if(!e)return;s();const t=new Image;t.src=e,l&&(t.crossOrigin=l),u&&(t.srcset=u),o&&(t.sizes=o),d&&(t.loading=d),t.onload=p=>{s(),m("loaded"),r==null||r(p)},t.onerror=p=>{s(),m("failed"),n==null||n(p)},f.current=t},[e,l,u,o,r,n,d]),s=()=>{f.current&&(f.current.onload=null,f.current.onerror=null,f.current=null)};return h(()=>{if(!i)return c==="loading"&&g(),()=>{s()}},[c,g,i]),i?"loaded":c};export{x as s,R as u};
