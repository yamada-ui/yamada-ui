import{j as r,a as Y}from"./jsx-runtime-TtYKBvr-.js";import{u as Z}from"./index-JOm7fgLq.js";import{c as ee}from"./index-ka2hqMi2.js";import{t as te}from"./index-TLIQvFF2.js";import{r as s}from"./index-IybTgENJ.js";import{L as se}from"./index-XrTzCoHS.js";import{c as ne,d as ae,o as A,v as $,G as p,h as L,H as S,p as oe,u as N,a as E,I as le}from"./factory-0U35BYk-.js";import{M as re}from"./motion-oaSIzDbx.js";import{f as q}from"./forward-ref-6T0UNPU-.js";import{u as ie}from"./use-component-style-5nTHLJk_.js";import{o as ce}from"./theme-provider-_TpUstJ8.js";const{DescendantsContextProvider:de,useDescendants:ue,useDescendant:me}=ee(),[fe,J]=ne({strict:!1,name:"SegmentedControlContext"}),Re=q((h,C)=>{const[u,m]=ie("SegmentedControl",h);let{className:f,id:o,name:y,isReadOnly:a,isDisabled:n,children:w,items:_=[],value:F,defaultValue:k,...d}=ce(m);o??(o=s.useId()),y??(y=`segmented-control-${s.useId()}`),d.onChange=ae(d.onChange);const x=ue(),[g,v]=s.useState(-1),[I,R]=s.useState(!1),M=s.useRef(null),j=s.useRef(new Map),[b,B]=Z({value:F,defaultValue:k,onChange:d.onChange}),G=s.useCallback(t=>{if(n||a){t.preventDefault();return}B(t.target.value)},[n,a,B]),z=s.useCallback((t,e)=>{if(!n)if(e){const i=x.enabledNextValue(t);i&&v(i.index)}else v(t)},[x,n]),H=s.useCallback(()=>v(-1),[]),K=s.useCallback((t={},e=null)=>({...A(d,["onChange"]),...t,ref:$(M,e),id:o,"aria-disabled":p(n),"aria-readonly":p(a),onBlur:L(t.onBlur,H)}),[o,n,a,H,d]),Q=s.useCallback(({index:t,...e}={},i=null)=>{const l=e.disabled??e.isDisabled??n,c=e.readOnly??e.isReadOnly??a,D=e.value===b;return{...A(e,["isDisabled","isReadOnly"]),ref:i,id:`${o}-${t}`,type:"radio",name:y,disabled:l||c,readOnly:c,checked:D,"aria-disabled":p(l),"aria-readonly":p(c),"data-checked":S(D),"data-focus":S(t===g),style:{border:"0px",clip:"rect(0px, 0px, 0px, 0px)",height:"1px",width:"1px",margin:"-1px",padding:"0px",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"},onChange:L(e.onChange,P=>!l&&!c?G(P):{})}},[n,a,b,o,y,g,G]),U=s.useCallback(({index:t,...e}={},i=null)=>{const l=e.disabled??e.isDisabled??n,c=e.readOnly??e.isReadOnly??a,D=e.value===b,P=t===g;return{props:e,ref:$(X=>j.current.set(e.value,X),i),"aria-disabled":p(l),"aria-readonly":p(c),"data-checked":S(D),"data-focus":S(P),"data-focus-visible":S(P&&I),onFocus:L(e.onFocus,()=>z(t,l||c)),...l||c?{_hover:{},_active:{},_focus:{},_invalid:{},_focusVisible:{}}:{}}},[g,n,I,a,z,b]);s.useEffect(()=>te(R),[]);const W={position:"relative",display:"inline-flex",alignItems:"center",...u.container},T=oe(w);let V=[];if(!T.length&&_.length?V=_.map(({label:t,value:e,...i},l)=>r(O,{value:e,...i,children:t},l)):V=T,b==null&&k==null)for(const t of V){if(t.type!==O&&t.type.displayName!==O.displayName)continue;const e=t.props.value;B(e);break}return r(de,{value:x,children:r(fe,{value:{getInputProps:Q,getLabelProps:U,styles:u,selectedValue:b},children:r(se,{id:o,children:r(N.div,{...K({},C),className:E("ui-segmented-control",f),__css:W,children:V})})})})}),O=q(({className:h,disabled:C,readOnly:u,isDisabled:m,isReadOnly:f,value:o,onChange:y,children:a,motionProps:n,...w},_)=>{const[,F]=le({rerender:!0}),{selectedValue:k,getInputProps:d,getLabelProps:x,styles:g}=J(),{index:v,register:I}=me({disabled:m||f}),R={index:v,value:o,onChange:y,disabled:C,readOnly:u,isDisabled:m,isReadOnly:f},M={position:"relative",cursor:"pointer",flex:"1 1 0%",display:"inline-flex",justifyContent:"center",alignItems:"center",...g.button},j=k===o;return Y(N.label,{...x(A(R,["onChange"])),className:E("ui-segmented-control__button",h),__css:M,...w,children:[r(N.input,{...d(R,$(I,_))}),r(N.span,{children:a}),j&&F?r(ge,{...n}):null]})});O.displayName="SegmentedControlButton";const ge=({className:h,transition:C,...u})=>{const{styles:m}=J(),f={position:"absolute",zIndex:"-10",w:"full",h:"full",...m.cursor};return r(re,{className:E("ui-segmented-control__cursor",h),layoutDependency:!1,layoutId:"cursor",transition:{type:"spring",bounce:.15,duration:.4,...C},__css:f,...u})};export{Re as S,O as a};
