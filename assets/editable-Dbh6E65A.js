import{j as B}from"./jsx-runtime-BpbtHYHY.js";import{u as de}from"./index-DLOQPSsO.js";import{u as fe}from"./index-rMDCi0HR.js";import{r as n}from"./index-BwPxMuoB.js";import{u as be,f as me}from"./form-control-4O_IQfgA.js";import{f as M}from"./forward-ref-Ukjd1cIW.js";import{a as pe}from"./use-component-style-65RA3nVD.js";import{o as ge}from"./theme-provider-DGyR61Aa.js";import{J as Ce,B as Ee,b as U,c as J,s as he,a3 as Pe,a4 as Z,u as ye,o as _e,h as d,a as R}from"./factory-B_KMcXyW.js";const ve=l=>{const{id:i,defaultValue:f,isPreviewFocusable:b=!0,placeholder:o,previewFocusable:p=b,selectAllOnFocus:F=!0,startWithEditView:G,submitOnBlur:N=!0,value:H,onCancel:y,onChange:Q,onEdit:X,onSubmit:_,...Y}=be(l),O=he(X),{disabled:r,readOnly:u,required:v,...c}=Pe(Y,me),[s,D]=n.useState(!!G&&!r),[a,x]=de({defaultValue:f||"",value:H,onChange:Q}),k=!s&&!r,j=a.length===0,[V,K]=n.useState(a),g=n.useRef(null),A=n.useRef(null),W=n.useRef(null),I=n.useRef(null),T=n.useRef(null),w=n.useCallback(e=>x(e.currentTarget.value),[x]),E=n.useCallback(()=>K(a),[a]),h=n.useCallback(()=>{k&&D(!0)},[k]),m=n.useCallback(()=>{D(!1),x(V),y==null||y(V)},[V,y,x]),C=n.useCallback(()=>{D(!1),K(a),_==null||_(a)},[_,a]),q=n.useCallback(e=>{if(!(e.key!=="Escape"&&e.key!=="Enter"))if(e.preventDefault(),e.key==="Escape")m();else{const{metaKey:t,shiftKey:P}=e;!P&&!t&&C()}},[m,C]),z=n.useCallback(e=>{e.key==="Escape"&&(e.preventDefault(),m())},[m]),S=n.useCallback(e=>{if(!s)return;const t=e.currentTarget.ownerDocument,P=e.relatedTarget??t.activeElement,ue=Z(I.current,P),ce=Z(T.current,P);!ue&&!ce&&(N?C():m())},[s,N,C,m]);fe({ref:g,elements:[I,T],enabled:s}),ye(()=>{var e,t;s&&((e=g.current)==null||e.focus(),F&&((t=g.current)==null||t.select()))},[]),_e(()=>{var e,t,P;if(!s){(e=W.current)==null||e.focus();return}(t=g.current)==null||t.focus(),F&&((P=g.current)==null||P.select()),O()},[s,O,F]),n.useEffect(()=>{if(s)return;const e=g.current;(e==null?void 0:e.ownerDocument.activeElement)===e&&(e==null||e.blur())},[s]);const se=n.useCallback((e={},t=null)=>({...e,ref:R(t,A),children:j?o:a,hidden:s,tabIndex:k&&p?0:void 0,onFocus:d(e.onFocus,h,E)}),[s,k,p,j,h,E,o,a]),ae=n.useCallback((e={},t=null)=>({...c,...e,id:i,ref:R(t,g),disabled:r,hidden:!s,placeholder:o,readOnly:u,required:v,value:a,onBlur:d(e.onBlur,S),onChange:d(e.onChange,w),onFocus:d(e.onFocus,E),onKeyDown:d(e.onKeyDown,q)}),[r,i,s,S,w,q,E,o,u,v,c,a]),oe=n.useCallback((e={},t=null)=>({...c,...e,id:i,ref:R(t,g),disabled:r,hidden:!s,placeholder:o,readOnly:u,required:v,value:a,onBlur:d(e.onBlur,S),onChange:d(e.onChange,w),onFocus:d(e.onFocus,E),onKeyDown:d(e.onKeyDown,z)}),[r,i,s,S,w,z,E,o,u,v,c,a]),ie=n.useCallback((e={},t=null)=>({...c,...e,ref:R(t,W),type:"button",disabled:r,readOnly:u,onClick:d(e.onClick,h)}),[r,h,u,c]),re=n.useCallback((e={},t=null)=>({...c,...e,ref:R(T,t),type:"button",disabled:r,readOnly:u,onClick:d(e.onClick,C)}),[r,C,u,c]),le=n.useCallback((e={},t=null)=>({...c,...e,ref:R(I,t),type:"button",disabled:r,readOnly:u,onClick:d(e.onClick,m)}),[r,m,u,c]);return{editing:s,value:a,getCancelProps:le,getEditProps:ie,getInputProps:ae,getPreviewProps:se,getSubmitProps:re,getTextareaProps:oe,onCancel:m,onEdit:h,onSubmit:C}},Ne=()=>{const{editing:l,getCancelProps:i,getEditProps:f,getSubmitProps:b}=L();return{editing:l,isEditing:l,getCancelProps:i,getEditProps:f,getSubmitProps:b}},[xe,L]=Ee({name:"EditableContext",errorMessage:"useEditableContext: context is undefined. Seems you forgot to wrap the editable components in `<Editable />`"}),$=M(({errorBorderColor:l,focusBorderColor:i,...f},b)=>{const[o,p]=pe("Editable",{errorBorderColor:l,focusBorderColor:i,...f}),{className:F,children:G,defaultValue:N,isDisabled:H,disabled:y=H,isInvalid:Q,invalid:X=Q,isPreviewFocusable:_,isReadOnly:Y,isRequired:O,placeholder:r,previewFocusable:u=_,readOnly:v=Y,required:c=O,selectAllOnFocus:s,startWithEditView:D,submitOnBlur:a,value:x,onCancel:k,onChange:j,onEdit:V,onSubmit:K,...g}=ge(p),{editing:A,getCancelProps:W,getEditProps:I,getInputProps:T,getPreviewProps:w,getSubmitProps:E,getTextareaProps:h,onCancel:m,onEdit:C,onSubmit:q}=ve({defaultValue:N,disabled:y,invalid:X,placeholder:r,previewFocusable:u,readOnly:v,required:c,selectAllOnFocus:s,startWithEditView:D,submitOnBlur:a,value:x,onCancel:k,onChange:j,onEdit:V,onSubmit:K}),z=Ce(G,{editing:A,onCancel:m,onEdit:C,onSubmit:q}),S={...o.container};return B.jsx(xe,{value:{editing:A,styles:o,getCancelProps:W,getEditProps:I,getInputProps:T,getPreviewProps:w,getSubmitProps:E,getTextareaProps:h},children:B.jsx(U.div,{ref:b,className:J("ui-editable",F),...g,__css:S,children:z})})});$.displayName="Editable";$.__ui__="Editable";const ee=M(({className:l,...i},f)=>{const{styles:b,getPreviewProps:o}=L(),p={bg:"transparent",cursor:"text",display:"inline-block",fontSize:"inherit",fontWeight:"inherit",textAlign:"inherit",...b.preview};return B.jsx(U.span,{className:J("ui-editable__preview",l),...o(i,f),__css:p})});ee.displayName="EditablePreview";ee.__ui__="EditablePreview";const te=M(({className:l,...i},f)=>{const{styles:b,getInputProps:o}=L(),p={bg:"transparent",fontSize:"inherit",fontWeight:"inherit",outline:0,textAlign:"inherit",...b.input};return B.jsx(U.input,{className:J("ui-editable__input",l),...o(i,f),__css:p})});te.displayName="EditableInput";te.__ui__="EditableInput";const ne=M(({className:l,...i},f)=>{const{styles:b,getTextareaProps:o}=L(),p={bg:"transparent",fontSize:"inherit",fontWeight:"inherit",outline:0,textAlign:"inherit",...b.textarea};return B.jsx(U.textarea,{className:J("ui-editable__textarea",l),...o(i,f),__css:p})});ne.displayName="EditableTextarea";ne.__ui__="EditableTextarea";export{$ as E,ee as a,te as b,ne as c,Ne as u};
