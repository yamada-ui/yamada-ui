import{r as n}from"./index-BwPxMuoB.js";import{s as k,I as O}from"./factory-DbNU74ts.js";const v=({defaultIsOpen:u=!1,defaultOpen:i=u,isOpen:f,open:o=f,timing:s,onClose:b,onOpen:d}={})=>{const[r,p]=n.useState(i),t=n.useRef(s??"after"),C=k(d),c=k(b),e=o!==void 0,l=o!==void 0?o:r,m=n.useCallback(async(...a)=>{t.current==="before"&&await C(...a),e||p(!0),t.current==="after"&&await C(...a)},[e,C,t]),w=n.useCallback(async(...a)=>{t.current==="before"&&await c(...a),e||p(!1),t.current==="after"&&await c(...a)},[e,c,t]),y=n.useCallback(async(...a)=>l?w(...a):m(...a),[l,m,w]);return{isOpen:l,open:l,onClose:w,onOpen:m,onToggle:y}},I=({disableCloseOnSuccess:u=!1,error:i,...f}={})=>{const{open:o,onClose:s,onOpen:b,onToggle:d}=v(f),r=n.useRef(void 0),p=n.useRef(O),t=n.useCallback(async(...c)=>{const e=new Promise((l,m)=>{p.current=async(...w)=>{r.current=void 0,l(),u||await s(...w)},r.current=m});await b(...c),await e},[b,s,u]),C=n.useCallback(async(...c)=>{var e;(e=r.current)==null||e.call(r,i),await s(...c)},[s,i]);return{isOpen:o,open:o,onClose:C,onOpen:t,onSuccess:p.current,onToggle:d}},g=({enabled:u,isSelected:i,mode:f="unmount",selected:o=i,wasSelected:s})=>!!(!u||o||f==="keepMounted"&&s);export{I as a,g as b,v as u};
